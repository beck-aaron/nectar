<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WINC1500 Weather Client Demo for SAME70 Xplained: socket</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WINC1500 Weather Client Demo for SAME70 Xplained
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">socket<div class="ingroups"><a class="el" href="group___socket_header.html">Socket</a> &raquo; <a class="el" href="group___socket_a_p_i.html">Functions</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Synchronous socket allocation function based on the specified socket type.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for socket:</div>
<div class="dyncontent">
<div class="center"><img src="group___socket_fn.gif" border="0" usemap="#agroup______socket__fn" alt=""/></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaec529015922aefe85bb0c0fa1bef761b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___b_s_p_define.html#gaecc0323d771e41ef81a76b5f12783e22">NMI_API</a> <a class="el" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___socket_fn.html#gaec529015922aefe85bb0c0fa1bef761b">socket</a> (<a class="el" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a> u16Domain, <a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8Type, <a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8Config)</td></tr>
<tr class="separator:gaec529015922aefe85bb0c0fa1bef761b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Synchronous socket allocation function based on the specified socket type. </p>
<p>Created sockets are non-blocking and their possible types are either TCP or a UDP sockets. The maximum allowed number of TCP sockets is <a class="el" href="group___i_p_defines.html#gab6c65ea312c8108924ada44302aa465f">TCP_SOCK_MAX</a> sockets while the maximum number of UDP sockets that can be created simultaneously is <a class="el" href="group___i_p_defines.html#gabbb22c156432dd303fe28b658ab8338d">UDP_SOCK_MAX</a> sockets. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaec529015922aefe85bb0c0fa1bef761b" name="gaec529015922aefe85bb0c0fa1bef761b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaec529015922aefe85bb0c0fa1bef761b">&#9670;&#160;</a></span>socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_s_p_define.html#gaecc0323d771e41ef81a76b5f12783e22">NMI_API</a> <a class="el" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> socket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a>&#160;</td>
          <td class="paramname"><em>u16Domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td>
          <td class="paramname"><em>u8Type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td>
          <td class="paramname"><em>u8Config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u16Domain</td><td>Socket family. The only allowed value is AF_INET (IPv4.0) for TCP/UDP sockets.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Type</td><td>Socket type. Allowed values are:<ul>
<li><a class="el" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a></li>
<li><a class="el" href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a></li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8Config</td><td>Used to specify the socket configuration. The following configuration values are defined:<br  />
<ul>
<li><a class="el" href="group___i_p_defines.html#ga7f65ba5083f2223f73d8d4d7859671df">SOCKET_CONFIG_SSL_OFF</a> : The socket is not secured by TLS.<br  />
</li>
<li><a class="el" href="group___i_p_defines.html#gaea1a50979447d109c76aaff28113fbb9">SOCKET_CONFIG_SSL_ON</a> : The socket is secured by TLS. This value has no effect if u8Type is <a class="el" href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a>.</li>
<li><a class="el" href="group___i_p_defines.html#ga6f76ecd7d194de00cb3cf032b0214d0c">SOCKET_CONFIG_SSL_DELAY</a> : The socket is not secured by TLS, but may be secured later, by calling <a class="el" href="group___secure_fn.html#ga24500b1c97cdaa4380634af9fb39a5a5">secure</a>. This value has no effect if u8Type is SOCK_DGRAM.<br  />
 All other configuration values are reserved and should not be used.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The <a class="el" href="group___socket_initialization_fn.html#ga5878b0f388e1d04b6f986f61a607ae4a">socketInit</a> function must be called once at the beginning of the application to initialize the socket handler. before any call to the <a class="el" href="group___socket_fn.html#gaec529015922aefe85bb0c0fa1bef761b">socket</a> function can be made.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___connect_fn.html#ga0c6fead3153f45eb4c862590d2a64122">connect</a> <a class="el" href="group___secure_fn.html#ga24500b1c97cdaa4380634af9fb39a5a5">secure</a> <a class="el" href="group___bind_fn.html#gaa63dbc9b10866f101ae33ea3469645fd">bind</a> <a class="el" href="group___listen_fn.html#ga64a01a865709a621b249aaac455f9e8b">listen</a> <a class="el" href="group___accept_fn.html#gac7c2f9f381cea0d52578825d7e563e8d">accept</a> <a class="el" href="group___receive_fn.html#gafb96ba8adac96c7f6cc0d6c257418e17">recv</a> <a class="el" href="group___receive_from_socket_fn.html#ga1f9ae5629c787b74f46c43805987d1a1">recvfrom</a> <a class="el" href="group___send_fn.html#ga926ec962609b596d9951199f52d02391">send</a> <a class="el" href="group___send_to_socket_fn.html#ga6a47ee942f7f547ec7f7cb921910444a">sendto</a> <a class="el" href="group___close_socket_fn.html#ga0bd24b8455319e7c40b61a0835b25bb1">close</a> <a class="el" href="group___set_socket_option_fn.html#ga3843a64f3a423fb78e2fbc7ab5242c1c">setsockopt</a> <a class="el" href="group___get_socket_options_fn.html#ga96fb86e2f672c9cdcafb3585186fe549">getsockopt</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>On successful socket creation, a non-blocking socket type is created and a socket ID is returned In case of failure the function returns a negative value, identifying one of the socket error codes defined. For example: <a class="el" href="group___socket_error_code.html#gaadbd3cd57b4ff7c25b6a9abc75cb37be">SOCK_ERR_INVALID</a> for invalid argument or <a class="el" href="group___socket_error_code.html#ga02b3df7adc7c06dd2fd82c14b4825a83">SOCK_ERR_MAX_TCP_SOCK</a> if the number of TCP allocated sockets exceeds the number of available sockets.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>The socket function must be called a priori to any other related socket functions "e.g. send, recv, close ..etc" </dd></dl>
<h1><a class="anchor" id="Socket_Ex"></a>
Allocation example</h1>
<p>This example demonstrates the use of the socket function to allocate the socket, returning the socket handler to be used for other socket operations. Socket creation is dependent on the socket type.</p>
<p>UDP example</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> UdpServerSocket = -1;</div>
<div class="line"> </div>
<div class="line">UdpServerSocket = <a class="code hl_function" href="group___socket_fn.html#gaec529015922aefe85bb0c0fa1bef761b">socket</a>(<a class="code hl_define" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>, <a class="code hl_define" href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a>, 0);</div>
<div class="ttc" id="agroup___i_p_defines_html_ga4db8b9a846c67404db0b6f014f9a9fdf"><div class="ttname"><a href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a></div><div class="ttdeci">#define SOCK_DGRAM</div><div class="ttdef"><b>Definition:</b> <a href="socket_8h_source.html#l00103">socket.h:99</a></div></div>
<div class="ttc" id="agroup___i_p_defines_html_ga9930604d0e32588eae76f43ca38e7826"><div class="ttname"><a href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a></div><div class="ttdeci">#define AF_INET</div><div class="ttdef"><b>Definition:</b> <a href="socket_8h_source.html#l00090">socket.h:86</a></div></div>
<div class="ttc" id="agroup___socket_enums_html_ga2faec34c3ab009cb46027b818c0b0d06"><div class="ttname"><a href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a></div><div class="ttdeci">sint8 SOCKET</div><div class="ttdoc">Definition for socket handler data type. Socket ID,used with all socket operations to uniquely identi...</div><div class="ttdef"><b>Definition:</b> <a href="m2m__socket__host__if_8h_source.html#l00240">m2m_socket_host_if.h:240</a></div></div>
<div class="ttc" id="agroup___socket_fn_html_gaec529015922aefe85bb0c0fa1bef761b"><div class="ttname"><a href="group___socket_fn.html#gaec529015922aefe85bb0c0fa1bef761b">socket</a></div><div class="ttdeci">SOCKET socket(uint16 u16Domain, uint8 u8Type, uint8 u8Config)</div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00537">socket.c:537</a></div></div>
</div><!-- fragment --><p>TCP example</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code hl_typedef" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> <a class="code hl_variable" href="main_8c.html#a2fb5a98da49204f7a256de18c7dc0b8a">tcp_client_socket</a> = -1;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_variable" href="main_8c.html#a2fb5a98da49204f7a256de18c7dc0b8a">tcp_client_socket</a> = <a class="code hl_function" href="group___socket_fn.html#gaec529015922aefe85bb0c0fa1bef761b">socket</a>(<a class="code hl_define" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>, <a class="code hl_define" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a>, 0));</div>
<div class="ttc" id="agroup___i_p_defines_html_ga249394484f9410a2e3f8eba24657feb9"><div class="ttname"><a href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a></div><div class="ttdeci">#define SOCK_STREAM</div><div class="ttdef"><b>Definition:</b> <a href="socket_8h_source.html#l00097">socket.h:93</a></div></div>
<div class="ttc" id="amain_8c_html_a2fb5a98da49204f7a256de18c7dc0b8a"><div class="ttname"><a href="main_8c.html#a2fb5a98da49204f7a256de18c7dc0b8a">tcp_client_socket</a></div><div class="ttdeci">static SOCKET tcp_client_socket</div><div class="ttdoc">TCP client socket handlers.</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00105">main.c:105</a></div></div>
</div><!-- fragment --><p>SSL example</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code hl_typedef" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a> ssl_socket = -1;</div>
<div class="line"> </div>
<div class="line">ssl_socket = <a class="code hl_function" href="group___socket_fn.html#gaec529015922aefe85bb0c0fa1bef761b">socket</a>(<a class="code hl_define" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>, <a class="code hl_define" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a>, SOCK_FLAGS_SSL));</div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="socket_8c_source.html#l00537">537</a> of file <a class="el" href="socket_8c_source.html">socket.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  538</span>{</div>
<div class="line"><span class="lineno">  539</span>    <a class="code hl_typedef" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a>                  sock = -1;</div>
<div class="line"><span class="lineno">  540</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>                   u8SockID;</div>
<div class="line"><span class="lineno">  541</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>                   u8Count;</div>
<div class="line"><span class="lineno">  542</span>    <span class="keyword">volatile</span> <a class="code hl_struct" href="structtstr_socket.html">tstrSocket</a>     *pstrSock;</div>
<div class="line"><span class="lineno">  543</span>    <span class="keyword">static</span> <span class="keyword">volatile</span> <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>   u8NextTcpSock   = 0;</div>
<div class="line"><span class="lineno">  544</span>    <span class="keyword">static</span> <span class="keyword">volatile</span> <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>   u8NextUdpSock   = 0;</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>    <span class="comment">/* The only supported family is the AF_INET for UDP and TCP transport layer protocols. */</span></div>
<div class="line"><span class="lineno">  547</span>    <span class="keywordflow">if</span>(u16Domain == <a class="code hl_define" href="group___i_p_defines.html#ga9930604d0e32588eae76f43ca38e7826">AF_INET</a>)</div>
<div class="line"><span class="lineno">  548</span>    {</div>
<div class="line"><span class="lineno">  549</span>        <span class="keywordflow">if</span>(u8Type == <a class="code hl_define" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a>)</div>
<div class="line"><span class="lineno">  550</span>        {</div>
<div class="line"><span class="lineno">  551</span>            <span class="keywordflow">for</span>(u8Count = 0; u8Count &lt; <a class="code hl_define" href="group___i_p_defines.html#gab6c65ea312c8108924ada44302aa465f">TCP_SOCK_MAX</a>; u8Count ++)</div>
<div class="line"><span class="lineno">  552</span>            {</div>
<div class="line"><span class="lineno">  553</span>                u8SockID    = u8NextTcpSock;</div>
<div class="line"><span class="lineno">  554</span>                pstrSock    = &amp;<a class="code hl_variable" href="socket_8c.html#a36c7dd1eb747dd28b93c775d31c4e2ca">gastrSockets</a>[u8NextTcpSock];</div>
<div class="line"><span class="lineno">  555</span>                u8NextTcpSock = (u8NextTcpSock + 1) % <a class="code hl_define" href="group___i_p_defines.html#gab6c65ea312c8108924ada44302aa465f">TCP_SOCK_MAX</a>;</div>
<div class="line"><span class="lineno">  556</span>                <span class="keywordflow">if</span>(!pstrSock-&gt;<a class="code hl_variable" href="structtstr_socket.html#afb38765d0b4400ade4cb30dbbb0aa95d">bIsUsed</a>)</div>
<div class="line"><span class="lineno">  557</span>                {</div>
<div class="line"><span class="lineno">  558</span>                    sock = (<a class="code hl_typedef" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a>)u8SockID;</div>
<div class="line"><span class="lineno">  559</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  560</span>                }</div>
<div class="line"><span class="lineno">  561</span>            }</div>
<div class="line"><span class="lineno">  562</span>        }</div>
<div class="line"><span class="lineno">  563</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(u8Type == <a class="code hl_define" href="group___i_p_defines.html#ga4db8b9a846c67404db0b6f014f9a9fdf">SOCK_DGRAM</a>)</div>
<div class="line"><span class="lineno">  564</span>        {</div>
<div class="line"><span class="lineno">  565</span>            <span class="keyword">volatile</span> <a class="code hl_struct" href="structtstr_socket.html">tstrSocket</a> *pastrUDPSockets = &amp;<a class="code hl_variable" href="socket_8c.html#a36c7dd1eb747dd28b93c775d31c4e2ca">gastrSockets</a>[<a class="code hl_define" href="group___i_p_defines.html#gab6c65ea312c8108924ada44302aa465f">TCP_SOCK_MAX</a>];</div>
<div class="line"><span class="lineno">  566</span>            <span class="keywordflow">for</span>(u8Count = 0; u8Count &lt; <a class="code hl_define" href="group___i_p_defines.html#gabbb22c156432dd303fe28b658ab8338d">UDP_SOCK_MAX</a>; u8Count ++)</div>
<div class="line"><span class="lineno">  567</span>            {</div>
<div class="line"><span class="lineno">  568</span>                u8SockID        = u8NextUdpSock;</div>
<div class="line"><span class="lineno">  569</span>                pstrSock        = &amp;pastrUDPSockets[u8NextUdpSock];</div>
<div class="line"><span class="lineno">  570</span>                u8NextUdpSock   = (u8NextUdpSock + 1) % <a class="code hl_define" href="group___i_p_defines.html#gabbb22c156432dd303fe28b658ab8338d">UDP_SOCK_MAX</a>;</div>
<div class="line"><span class="lineno">  571</span>                <span class="keywordflow">if</span>(!pstrSock-&gt;<a class="code hl_variable" href="structtstr_socket.html#afb38765d0b4400ade4cb30dbbb0aa95d">bIsUsed</a>)</div>
<div class="line"><span class="lineno">  572</span>                {</div>
<div class="line"><span class="lineno">  573</span>                    sock = (<a class="code hl_typedef" href="group___socket_enums.html#ga2faec34c3ab009cb46027b818c0b0d06">SOCKET</a>)(u8SockID + <a class="code hl_define" href="group___i_p_defines.html#gab6c65ea312c8108924ada44302aa465f">TCP_SOCK_MAX</a>);</div>
<div class="line"><span class="lineno">  574</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  575</span>                }</div>
<div class="line"><span class="lineno">  576</span>            }</div>
<div class="line"><span class="lineno">  577</span>        }</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>        <span class="keywordflow">if</span>(sock &gt;= 0)</div>
<div class="line"><span class="lineno">  580</span>        {</div>
<div class="line"><span class="lineno">  581</span>            <a class="code hl_function" href="group___c_o_m_m_o_n_a_p_i.html#ga245e71a174d65f12926883f76752df93">m2m_memset</a>((<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>*)pstrSock, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_socket.html">tstrSocket</a>));</div>
<div class="line"><span class="lineno">  582</span>            pstrSock-&gt;bIsUsed = 1;</div>
<div class="line"><span class="lineno">  583</span> </div>
<div class="line"><span class="lineno">  584</span>            <span class="comment">/* The session ID is used to distinguish different socket connections</span></div>
<div class="line"><span class="lineno">  585</span><span class="comment">                by comparing the assigned session ID to the one reported by the firmware*/</span></div>
<div class="line"><span class="lineno">  586</span>            ++<a class="code hl_variable" href="socket_8c.html#aaf4c9a4108ed0cf5b98e5a291f71a335">gu16SessionID</a>;</div>
<div class="line"><span class="lineno">  587</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="socket_8c.html#aaf4c9a4108ed0cf5b98e5a291f71a335">gu16SessionID</a> == 0)</div>
<div class="line"><span class="lineno">  588</span>                ++<a class="code hl_variable" href="socket_8c.html#aaf4c9a4108ed0cf5b98e5a291f71a335">gu16SessionID</a>;</div>
<div class="line"><span class="lineno">  589</span>                </div>
<div class="line"><span class="lineno">  590</span>            pstrSock-&gt;u16SessionID = <a class="code hl_variable" href="socket_8c.html#aaf4c9a4108ed0cf5b98e5a291f71a335">gu16SessionID</a>;</div>
<div class="line"><span class="lineno">  591</span>            <a class="code hl_define" href="group___debug_defines.html#ga84108eca2655e811179386a39c62acf2">M2M_INFO</a>(<span class="stringliteral">&quot;Socket %d session ID = %d\r\n&quot;</span>,sock, <a class="code hl_variable" href="socket_8c.html#aaf4c9a4108ed0cf5b98e5a291f71a335">gu16SessionID</a> );</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>            <span class="keywordflow">if</span>((u8Type == <a class="code hl_define" href="group___i_p_defines.html#ga249394484f9410a2e3f8eba24657feb9">SOCK_STREAM</a>) &amp;&amp; (u8Config != <a class="code hl_define" href="group___i_p_defines.html#ga7f65ba5083f2223f73d8d4d7859671df">SOCKET_CONFIG_SSL_OFF</a>))</div>
<div class="line"><span class="lineno">  594</span>            {</div>
<div class="line"><span class="lineno">  595</span>                <a class="code hl_struct" href="structtstr_s_s_l_socket_create_cmd.html">tstrSSLSocketCreateCmd</a>  strSSLCreate;</div>
<div class="line"><span class="lineno">  596</span>                strSSLCreate.<a class="code hl_variable" href="structtstr_s_s_l_socket_create_cmd.html#aa80fe9f626ebb95f64ff8c81285170e0">sslSock</a> = sock;</div>
<div class="line"><span class="lineno">  597</span>                <a class="code hl_define" href="socket_8c.html#a60ca8f2af1488270c6182d2a50686bd0">SOCKET_REQUEST</a>(<a class="code hl_define" href="m2m__socket__host__if_8h.html#a01ef1e536946ad0f3409a9d4ef170e82">SOCKET_CMD_SSL_CREATE</a>, (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *)&amp;strSSLCreate, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_s_s_l_socket_create_cmd.html">tstrSSLSocketCreateCmd</a>), 0, 0, 0);</div>
<div class="line"><span class="lineno">  598</span> </div>
<div class="line"><span class="lineno">  599</span>                pstrSock-&gt;u8SSLFlags = <a class="code hl_define" href="socket_8c.html#a30c4fed1007e30f0b7d9472dd74f3c29">SSL_FLAGS_ACTIVE</a> | <a class="code hl_define" href="socket_8c.html#a2ce4f0d95e5947dc72a68ca96f15ef65">SSL_FLAGS_NO_TX_COPY</a>;</div>
<div class="line"><span class="lineno">  600</span>                <span class="keywordflow">if</span>(u8Config == <a class="code hl_define" href="group___i_p_defines.html#ga6f76ecd7d194de00cb3cf032b0214d0c">SOCKET_CONFIG_SSL_DELAY</a>)</div>
<div class="line"><span class="lineno">  601</span>                    pstrSock-&gt;u8SSLFlags |= <a class="code hl_define" href="socket_8c.html#aa275c02a51faee81d8acc196fd638b97">SSL_FLAGS_DELAY</a>;</div>
<div class="line"><span class="lineno">  602</span>            }</div>
<div class="line"><span class="lineno">  603</span>        }</div>
<div class="line"><span class="lineno">  604</span>    }</div>
<div class="line"><span class="lineno">  605</span>    <span class="keywordflow">return</span> sock;</div>
<div class="line"><span class="lineno">  606</span>}</div>
<div class="ttc" id="agroup___c_o_m_m_o_n_a_p_i_html_ga245e71a174d65f12926883f76752df93"><div class="ttname"><a href="group___c_o_m_m_o_n_a_p_i.html#ga245e71a174d65f12926883f76752df93">m2m_memset</a></div><div class="ttdeci">void m2m_memset(uint8 *pBuf, uint8 val, uint32 sz)</div><div class="ttdoc">Set specified number of data bytes in specified data buffer to specified value.</div><div class="ttdef"><b>Definition:</b> <a href="nm__common_8c_source.html#l00058">nm_common.c:58</a></div></div>
<div class="ttc" id="agroup___data_t_html_ga4df709a77647e870bbf1d955b8edc9a6"><div class="ttname"><a href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdoc">Range of values between 0 to 255.</div><div class="ttdef"><b>Definition:</b> <a href="nm__bsp_8h_source.html#l00093">nm_bsp.h:93</a></div></div>
<div class="ttc" id="agroup___debug_defines_html_ga84108eca2655e811179386a39c62acf2"><div class="ttname"><a href="group___debug_defines.html#ga84108eca2655e811179386a39c62acf2">M2M_INFO</a></div><div class="ttdeci">#define M2M_INFO(...)</div><div class="ttdef"><b>Definition:</b> <a href="nm__debug_8h_source.html#l00061">nm_debug.h:61</a></div></div>
<div class="ttc" id="agroup___i_p_defines_html_ga6f76ecd7d194de00cb3cf032b0214d0c"><div class="ttname"><a href="group___i_p_defines.html#ga6f76ecd7d194de00cb3cf032b0214d0c">SOCKET_CONFIG_SSL_DELAY</a></div><div class="ttdeci">#define SOCKET_CONFIG_SSL_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="socket_8h_source.html#l00132">socket.h:125</a></div></div>
<div class="ttc" id="agroup___i_p_defines_html_ga7f65ba5083f2223f73d8d4d7859671df"><div class="ttname"><a href="group___i_p_defines.html#ga7f65ba5083f2223f73d8d4d7859671df">SOCKET_CONFIG_SSL_OFF</a></div><div class="ttdeci">#define SOCKET_CONFIG_SSL_OFF</div><div class="ttdef"><b>Definition:</b> <a href="socket_8h_source.html#l00118">socket.h:114</a></div></div>
<div class="ttc" id="agroup___i_p_defines_html_gab6c65ea312c8108924ada44302aa465f"><div class="ttname"><a href="group___i_p_defines.html#gab6c65ea312c8108924ada44302aa465f">TCP_SOCK_MAX</a></div><div class="ttdeci">#define TCP_SOCK_MAX</div><div class="ttdef"><b>Definition:</b> <a href="socket_8h_source.html#l00137">socket.h:134</a></div></div>
<div class="ttc" id="agroup___i_p_defines_html_gabbb22c156432dd303fe28b658ab8338d"><div class="ttname"><a href="group___i_p_defines.html#gabbb22c156432dd303fe28b658ab8338d">UDP_SOCK_MAX</a></div><div class="ttdeci">#define UDP_SOCK_MAX</div><div class="ttdef"><b>Definition:</b> <a href="socket_8h_source.html#l00142">socket.h:139</a></div></div>
<div class="ttc" id="am2m__socket__host__if_8h_html_a01ef1e536946ad0f3409a9d4ef170e82"><div class="ttname"><a href="m2m__socket__host__if_8h.html#a01ef1e536946ad0f3409a9d4ef170e82">SOCKET_CMD_SSL_CREATE</a></div><div class="ttdeci">#define SOCKET_CMD_SSL_CREATE</div><div class="ttdef"><b>Definition:</b> <a href="m2m__socket__host__if_8h_source.html#l00180">m2m_socket_host_if.h:178</a></div></div>
<div class="ttc" id="asocket_8c_html_a2ce4f0d95e5947dc72a68ca96f15ef65"><div class="ttname"><a href="socket_8c.html#a2ce4f0d95e5947dc72a68ca96f15ef65">SSL_FLAGS_NO_TX_COPY</a></div><div class="ttdeci">#define SSL_FLAGS_NO_TX_COPY</div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00071">socket.c:71</a></div></div>
<div class="ttc" id="asocket_8c_html_a30c4fed1007e30f0b7d9472dd74f3c29"><div class="ttname"><a href="socket_8c.html#a30c4fed1007e30f0b7d9472dd74f3c29">SSL_FLAGS_ACTIVE</a></div><div class="ttdeci">#define SSL_FLAGS_ACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00066">socket.c:66</a></div></div>
<div class="ttc" id="asocket_8c_html_a36c7dd1eb747dd28b93c775d31c4e2ca"><div class="ttname"><a href="socket_8c.html#a36c7dd1eb747dd28b93c775d31c4e2ca">gastrSockets</a></div><div class="ttdeci">volatile tstrSocket gastrSockets[MAX_SOCKET]</div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00111">socket.c:111</a></div></div>
<div class="ttc" id="asocket_8c_html_a60ca8f2af1488270c6182d2a50686bd0"><div class="ttname"><a href="socket_8c.html#a60ca8f2af1488270c6182d2a50686bd0">SOCKET_REQUEST</a></div><div class="ttdeci">#define SOCKET_REQUEST(reqID, reqArgs, reqSize, reqPayload, reqPayloadSize, reqPayloadOffset)</div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00062">socket.c:62</a></div></div>
<div class="ttc" id="asocket_8c_html_aa275c02a51faee81d8acc196fd638b97"><div class="ttname"><a href="socket_8c.html#aa275c02a51faee81d8acc196fd638b97">SSL_FLAGS_DELAY</a></div><div class="ttdeci">#define SSL_FLAGS_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00073">socket.c:73</a></div></div>
<div class="ttc" id="asocket_8c_html_aaf4c9a4108ed0cf5b98e5a291f71a335"><div class="ttname"><a href="socket_8c.html#aaf4c9a4108ed0cf5b98e5a291f71a335">gu16SessionID</a></div><div class="ttdeci">volatile uint16 gu16SessionID</div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00114">socket.c:114</a></div></div>
<div class="ttc" id="astructtstr_s_s_l_socket_create_cmd_html"><div class="ttname"><a href="structtstr_s_s_l_socket_create_cmd.html">tstrSSLSocketCreateCmd</a></div><div class="ttdef"><b>Definition:</b> <a href="m2m__socket__host__if_8h_source.html#l00453">m2m_socket_host_if.h:453</a></div></div>
<div class="ttc" id="astructtstr_s_s_l_socket_create_cmd_html_aa80fe9f626ebb95f64ff8c81285170e0"><div class="ttname"><a href="structtstr_s_s_l_socket_create_cmd.html#aa80fe9f626ebb95f64ff8c81285170e0">tstrSSLSocketCreateCmd::sslSock</a></div><div class="ttdeci">SOCKET sslSock</div><div class="ttdef"><b>Definition:</b> <a href="m2m__socket__host__if_8h_source.html#l00454">m2m_socket_host_if.h:454</a></div></div>
<div class="ttc" id="astructtstr_socket_html"><div class="ttname"><a href="structtstr_socket.html">tstrSocket</a></div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00093">socket.c:93</a></div></div>
<div class="ttc" id="astructtstr_socket_html_afb38765d0b4400ade4cb30dbbb0aa95d"><div class="ttname"><a href="structtstr_socket.html#afb38765d0b4400ade4cb30dbbb0aa95d">tstrSocket::bIsUsed</a></div><div class="ttdeci">uint8 bIsUsed</div><div class="ttdef"><b>Definition:</b> <a href="socket_8c_source.html#l00098">socket.c:98</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="socket_8h_source.html#l00086">AF_INET</a>, <a class="el" href="socket_8c_source.html#l00098">tstrSocket::bIsUsed</a>, <a class="el" href="socket_8c_source.html#l00111">gastrSockets</a>, <a class="el" href="socket_8c_source.html#l00114">gu16SessionID</a>, <a class="el" href="nm__debug_8h_source.html#l00061">M2M_INFO</a>, <a class="el" href="nm__common_8c_source.html#l00058">m2m_memset()</a>, <a class="el" href="socket_8h_source.html#l00099">SOCK_DGRAM</a>, <a class="el" href="socket_8h_source.html#l00093">SOCK_STREAM</a>, <a class="el" href="m2m__socket__host__if_8h_source.html#l00178">SOCKET_CMD_SSL_CREATE</a>, <a class="el" href="socket_8h_source.html#l00125">SOCKET_CONFIG_SSL_DELAY</a>, <a class="el" href="socket_8h_source.html#l00114">SOCKET_CONFIG_SSL_OFF</a>, <a class="el" href="socket_8c_source.html#l00062">SOCKET_REQUEST</a>, <a class="el" href="socket_8c_source.html#l00066">SSL_FLAGS_ACTIVE</a>, <a class="el" href="socket_8c_source.html#l00073">SSL_FLAGS_DELAY</a>, <a class="el" href="socket_8c_source.html#l00071">SSL_FLAGS_NO_TX_COPY</a>, <a class="el" href="m2m__socket__host__if_8h_source.html#l00454">tstrSSLSocketCreateCmd::sslSock</a>, <a class="el" href="socket_8h_source.html#l00134">TCP_SOCK_MAX</a>, and <a class="el" href="socket_8h_source.html#l00139">UDP_SOCK_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00669">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___socket_fn_gaec529015922aefe85bb0c0fa1bef761b_cgraph.gif" border="0" usemap="#agroup___socket_fn_gaec529015922aefe85bb0c0fa1bef761b_cgraph" alt=""/></div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Mar 11 2023 23:19:38 for WINC1500 Weather Client Demo for SAME70 Xplained by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
