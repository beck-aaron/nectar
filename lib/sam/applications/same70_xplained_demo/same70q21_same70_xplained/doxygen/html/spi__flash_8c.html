<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WINC1500 Weather Client Demo for SAME70 Xplained: spi_flash.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WINC1500 Weather Client Demo for SAME70 Xplained
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_0a43594a05a71bab10bc2b94eb88ad34.html">components</a></li><li class="navelem"><a class="el" href="dir_d639745fe6bcb2d77be2641c8f20ce33.html">wifi</a></li><li class="navelem"><a class="el" href="dir_26d57bbfbefc2eb9e1568b957ff65e50.html">winc1500</a></li><li class="navelem"><a class="el" href="dir_a65e392e45cf4a236c680a94c68a77ab.html">host_drv</a></li><li class="navelem"><a class="el" href="dir_4b228a8631b5453b5e6ef3f3a5e8d2ea.html">spi_flash</a></li><li class="navelem"><a class="el" href="dir_6a340ac93816ad19e3fdf6adb58383c2.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">spi_flash.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>WINC1500 SPI Flash.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="spi__flash_8h_source.html">spi_flash/include/spi_flash.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for spi_flash.c:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c__incl.gif" border="0" usemap="#aspi__flash_8c" alt=""/></div>
</div>
</div>
<p><a href="spi__flash_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afb181c0df7e4d3faee6181e942cd42be"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#afb181c0df7e4d3faee6181e942cd42be">CORTUS_SHARE_MEM_BASE</a>&#160;&#160;&#160;(0x60000000UL)</td></tr>
<tr class="separator:afb181c0df7e4d3faee6181e942cd42be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71be2eb3e4ec829627e4fbd389fda4eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a71be2eb3e4ec829627e4fbd389fda4eb">DUMMY_REGISTER</a>&#160;&#160;&#160;(0x1084)</td></tr>
<tr class="separator:a71be2eb3e4ec829627e4fbd389fda4eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afb081a75593f3c034881ada625cf8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a6afb081a75593f3c034881ada625cf8d">FLASH_BLOCK_SIZE</a>&#160;&#160;&#160;(32UL * 1024)</td></tr>
<tr class="separator:a6afb081a75593f3c034881ada625cf8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b399d772842da679e4b3d0d31bde82"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#ad1b399d772842da679e4b3d0d31bde82">FLASH_PAGE_SZ</a>&#160;&#160;&#160;(256)</td></tr>
<tr class="separator:ad1b399d772842da679e4b3d0d31bde82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acca244061db9f298d61975163169fb24"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#acca244061db9f298d61975163169fb24">GET_UINT32</a>(X,  Y)&#160;&#160;&#160;(X[0+Y] + ((<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)X[1+Y]&lt;&lt;8) + ((<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)X[2+Y]&lt;&lt;16) +((<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)X[3+Y]&lt;&lt;24))</td></tr>
<tr class="separator:acca244061db9f298d61975163169fb24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c21f46c5ebd7fa5b914b01e62c1f313"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a6c21f46c5ebd7fa5b914b01e62c1f313">HOST_SHARE_MEM_BASE</a>&#160;&#160;&#160;(0xd0000UL)</td></tr>
<tr class="separator:a6c21f46c5ebd7fa5b914b01e62c1f313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11945202c0f1ccd806695e8f95bdcf43"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a11945202c0f1ccd806695e8f95bdcf43">NMI_SPI_FLASH_ADDR</a>&#160;&#160;&#160;(0x111c)</td></tr>
<tr class="separator:a11945202c0f1ccd806695e8f95bdcf43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa34b8813d828dddc6c8853041810691"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a>&#160;&#160;&#160;(0x10200)</td></tr>
<tr class="separator:afa34b8813d828dddc6c8853041810691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05fbdafcafd204b546e76cfe7b1ab2e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x0c)</td></tr>
<tr class="separator:a05fbdafcafd204b546e76cfe7b1ab2e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5130ca7c4d089c6e3d6bfaba588485f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a5130ca7c4d089c6e3d6bfaba588485f6">SPI_FLASH_BUF2</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x10)</td></tr>
<tr class="separator:a5130ca7c4d089c6e3d6bfaba588485f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f25744fc26fd7b8c7fb5711bba0ebd9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x14)</td></tr>
<tr class="separator:a3f25744fc26fd7b8c7fb5711bba0ebd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b6b1ae66fe39d7d191e17148bfadd27"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x04)</td></tr>
<tr class="separator:a2b6b1ae66fe39d7d191e17148bfadd27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada57e0fafb17fd8bac3cd236b75400db"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x08)</td></tr>
<tr class="separator:ada57e0fafb17fd8bac3cd236b75400db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70b0c65b5e77a8aa07cc95607e6dc992"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x1c)</td></tr>
<tr class="separator:a70b0c65b5e77a8aa07cc95607e6dc992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25b574a296f6b3ce3671990801bc6ee8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a25b574a296f6b3ce3671990801bc6ee8">SPI_FLASH_MODE</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x00)</td></tr>
<tr class="separator:a25b574a296f6b3ce3671990801bc6ee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3d48f9f6ea0f0af9ae6ed4af584ca18"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#ac3d48f9f6ea0f0af9ae6ed4af584ca18">SPI_FLASH_MSB_CTL</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x20)</td></tr>
<tr class="separator:ac3d48f9f6ea0f0af9ae6ed4af584ca18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce6155adb0ea813ad9b25af8b320289"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x18)</td></tr>
<tr class="separator:a9ce6155adb0ea813ad9b25af8b320289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a578310a99672d3e27a38fc07b0b7a815"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a578310a99672d3e27a38fc07b0b7a815">SPI_FLASH_TX_CTL</a>&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x24)</td></tr>
<tr class="separator:a578310a99672d3e27a38fc07b0b7a815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ba202b05caf39795aeca91b0ae547e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a45ba202b05caf39795aeca91b0ae547e">TIMEOUT</a>&#160;&#160;&#160;(-1) /*MS*/</td></tr>
<tr class="separator:a45ba202b05caf39795aeca91b0ae547e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a23d1f759627afdedeb961dd12aec2c7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a23d1f759627afdedeb961dd12aec2c7d">spi_flash_enable</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> enable)</td></tr>
<tr class="separator:a23d1f759627afdedeb961dd12aec2c7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab812ecc64869be5109c38fec4cd976d3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#ab812ecc64869be5109c38fec4cd976d3">spi_flash_enter_low_power_mode</a> (void)</td></tr>
<tr class="separator:ab812ecc64869be5109c38fec4cd976d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga323666ce6ad89c975a6c42c865a2f41a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_pi_flash_erase.html#ga323666ce6ad89c975a6c42c865a2f41a">spi_flash_erase</a> (<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Offset, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Sz)</td></tr>
<tr class="memdesc:ga323666ce6ad89c975a6c42c865a2f41a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase a specified portion of SPI Flash.<br  />
.  <br /></td></tr>
<tr class="separator:ga323666ce6ad89c975a6c42c865a2f41a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a155fac74a5d09d3fdbac95964b487c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_pi_flash_get_fn.html#ga8a155fac74a5d09d3fdbac95964b487c">spi_flash_get_size</a> (void)</td></tr>
<tr class="memdesc:ga8a155fac74a5d09d3fdbac95964b487c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get size of SPI Flash.  <br /></td></tr>
<tr class="separator:ga8a155fac74a5d09d3fdbac95964b487c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45ffec24fbdc418f574fd2769a6b6ac9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a45ffec24fbdc418f574fd2769a6b6ac9">spi_flash_leave_low_power_mode</a> (void)</td></tr>
<tr class="separator:a45ffec24fbdc418f574fd2769a6b6ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a475b82d7678da3ae2a3e2a0051bcea10"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a475b82d7678da3ae2a3e2a0051bcea10">spi_flash_load_to_cortus_mem</a> (<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32MemAdr, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32FlashAdr, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Sz)</td></tr>
<tr class="separator:a475b82d7678da3ae2a3e2a0051bcea10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5932b86421839ecea86f01b5fba36f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#ade5932b86421839ecea86f01b5fba36f">spi_flash_page_program</a> (<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32MemAdr, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32FlashAdr, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Sz)</td></tr>
<tr class="separator:ade5932b86421839ecea86f01b5fba36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab395d13e0f6d9eea13113e6a5239b9a3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#ab395d13e0f6d9eea13113e6a5239b9a3">spi_flash_pp</a> (<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Offset, <a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *pu8Buf, <a class="el" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a> u16Sz)</td></tr>
<tr class="separator:ab395d13e0f6d9eea13113e6a5239b9a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac35698ef9a48b4ab73a5901e3f094c54"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#ac35698ef9a48b4ab73a5901e3f094c54">spi_flash_rdid</a> (void)</td></tr>
<tr class="memdesc:ac35698ef9a48b4ab73a5901e3f094c54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read SPI Flash ID.  <br /></td></tr>
<tr class="separator:ac35698ef9a48b4ab73a5901e3f094c54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b0828301a6a13644b046fe9f6e4a8e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_pi_flash_read.html#ga8b0828301a6a13644b046fe9f6e4a8e4">spi_flash_read</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *pu8Buf, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32offset, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Sz)</td></tr>
<tr class="memdesc:ga8b0828301a6a13644b046fe9f6e4a8e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a specified portion of data from SPI Flash.<br  />
.  <br /></td></tr>
<tr class="separator:ga8b0828301a6a13644b046fe9f6e4a8e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa244cce032983541b1bb20d1d06500f2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#aa244cce032983541b1bb20d1d06500f2">spi_flash_read_internal</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *pu8Buf, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Addr, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Sz)</td></tr>
<tr class="separator:aa244cce032983541b1bb20d1d06500f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e09bf962df484865b899faf2aed8846"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a7e09bf962df484865b899faf2aed8846">spi_flash_read_status_reg</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *val)</td></tr>
<tr class="separator:a7e09bf962df484865b899faf2aed8846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72ea225fe1018383320f440e5ed60ee"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#ae72ea225fe1018383320f440e5ed60ee">spi_flash_sector_erase</a> (<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32FlashAdr)</td></tr>
<tr class="separator:ae72ea225fe1018383320f440e5ed60ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga925d54e70b77c63b37b8b5dbca9d09fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___s_pi_flash_write.html#ga925d54e70b77c63b37b8b5dbca9d09fe">spi_flash_write</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *pu8Buf, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Offset, <a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Sz)</td></tr>
<tr class="memdesc:ga925d54e70b77c63b37b8b5dbca9d09fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a specified portion of data to SPI Flash.<br  />
.  <br /></td></tr>
<tr class="separator:ga925d54e70b77c63b37b8b5dbca9d09fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9848c51ff872cc056b972a07db96a7ee"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a9848c51ff872cc056b972a07db96a7ee">spi_flash_write_disable</a> (void)</td></tr>
<tr class="memdesc:a9848c51ff872cc056b972a07db96a7ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send write disable command to SPI flash.  <br /></td></tr>
<tr class="separator:a9848c51ff872cc056b972a07db96a7ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b91b3c61b2e3789005aa262e797fbd9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__flash_8c.html#a7b91b3c61b2e3789005aa262e797fbd9">spi_flash_write_enable</a> (void)</td></tr>
<tr class="memdesc:a7b91b3c61b2e3789005aa262e797fbd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send write enable command to SPI flash.  <br /></td></tr>
<tr class="separator:a7b91b3c61b2e3789005aa262e797fbd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>WINC1500 SPI Flash. </p>
<p>Copyright (c) 2016-2021 Microchip Technology Inc. and its subsidiaries. </p>

<p class="definition">Definition in file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afb181c0df7e4d3faee6181e942cd42be" name="afb181c0df7e4d3faee6181e942cd42be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb181c0df7e4d3faee6181e942cd42be">&#9670;&#160;</a></span>CORTUS_SHARE_MEM_BASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CORTUS_SHARE_MEM_BASE&#160;&#160;&#160;(0x60000000UL)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00052">52</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a71be2eb3e4ec829627e4fbd389fda4eb" name="a71be2eb3e4ec829627e4fbd389fda4eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71be2eb3e4ec829627e4fbd389fda4eb">&#9670;&#160;</a></span>DUMMY_REGISTER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DUMMY_REGISTER&#160;&#160;&#160;(0x1084)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00039">39</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a6afb081a75593f3c034881ada625cf8d" name="a6afb081a75593f3c034881ada625cf8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6afb081a75593f3c034881ada625cf8d">&#9670;&#160;</a></span>FLASH_BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_BLOCK_SIZE&#160;&#160;&#160;(32UL * 1024)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Block Size in Flash Memory </p>

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00047">47</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="ad1b399d772842da679e4b3d0d31bde82" name="ad1b399d772842da679e4b3d0d31bde82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1b399d772842da679e4b3d0d31bde82">&#9670;&#160;</a></span>FLASH_PAGE_SZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_PAGE_SZ&#160;&#160;&#160;(256)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Page Size in Flash Memory </p>

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00049">49</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="acca244061db9f298d61975163169fb24" name="acca244061db9f298d61975163169fb24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acca244061db9f298d61975163169fb24">&#9670;&#160;</a></span>GET_UINT32</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_UINT32</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">X, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">Y&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(X[0+Y] + ((<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)X[1+Y]&lt;&lt;8) + ((<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)X[2+Y]&lt;&lt;16) +((<a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)X[3+Y]&lt;&lt;24))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00057">57</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a6c21f46c5ebd7fa5b914b01e62c1f313" name="a6c21f46c5ebd7fa5b914b01e62c1f313"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c21f46c5ebd7fa5b914b01e62c1f313">&#9670;&#160;</a></span>HOST_SHARE_MEM_BASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HOST_SHARE_MEM_BASE&#160;&#160;&#160;(0xd0000UL)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00051">51</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a11945202c0f1ccd806695e8f95bdcf43" name="a11945202c0f1ccd806695e8f95bdcf43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11945202c0f1ccd806695e8f95bdcf43">&#9670;&#160;</a></span>NMI_SPI_FLASH_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NMI_SPI_FLASH_ADDR&#160;&#160;&#160;(0x111c)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00053">53</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="afa34b8813d828dddc6c8853041810691" name="afa34b8813d828dddc6c8853041810691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa34b8813d828dddc6c8853041810691">&#9670;&#160;</a></span>SPI_FLASH_BASE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_BASE&#160;&#160;&#160;(0x10200)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00058">58</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a05fbdafcafd204b546e76cfe7b1ab2e2" name="a05fbdafcafd204b546e76cfe7b1ab2e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05fbdafcafd204b546e76cfe7b1ab2e2">&#9670;&#160;</a></span>SPI_FLASH_BUF1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_BUF1&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x0c)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00062">62</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a5130ca7c4d089c6e3d6bfaba588485f6" name="a5130ca7c4d089c6e3d6bfaba588485f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5130ca7c4d089c6e3d6bfaba588485f6">&#9670;&#160;</a></span>SPI_FLASH_BUF2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_BUF2&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00063">63</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a3f25744fc26fd7b8c7fb5711bba0ebd9" name="a3f25744fc26fd7b8c7fb5711bba0ebd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f25744fc26fd7b8c7fb5711bba0ebd9">&#9670;&#160;</a></span>SPI_FLASH_BUF_DIR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_BUF_DIR&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x14)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00064">64</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a2b6b1ae66fe39d7d191e17148bfadd27" name="a2b6b1ae66fe39d7d191e17148bfadd27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b6b1ae66fe39d7d191e17148bfadd27">&#9670;&#160;</a></span>SPI_FLASH_CMD_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_CMD_CNT&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x04)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00060">60</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="ada57e0fafb17fd8bac3cd236b75400db" name="ada57e0fafb17fd8bac3cd236b75400db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada57e0fafb17fd8bac3cd236b75400db">&#9670;&#160;</a></span>SPI_FLASH_DATA_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_DATA_CNT&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x08)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00061">61</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a70b0c65b5e77a8aa07cc95607e6dc992" name="a70b0c65b5e77a8aa07cc95607e6dc992"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70b0c65b5e77a8aa07cc95607e6dc992">&#9670;&#160;</a></span>SPI_FLASH_DMA_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_DMA_ADDR&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x1c)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00066">66</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a25b574a296f6b3ce3671990801bc6ee8" name="a25b574a296f6b3ce3671990801bc6ee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25b574a296f6b3ce3671990801bc6ee8">&#9670;&#160;</a></span>SPI_FLASH_MODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_MODE&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x00)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00059">59</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="ac3d48f9f6ea0f0af9ae6ed4af584ca18" name="ac3d48f9f6ea0f0af9ae6ed4af584ca18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3d48f9f6ea0f0af9ae6ed4af584ca18">&#9670;&#160;</a></span>SPI_FLASH_MSB_CTL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_MSB_CTL&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x20)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00067">67</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a9ce6155adb0ea813ad9b25af8b320289" name="a9ce6155adb0ea813ad9b25af8b320289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ce6155adb0ea813ad9b25af8b320289">&#9670;&#160;</a></span>SPI_FLASH_TR_DONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_TR_DONE&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x18)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00065">65</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a578310a99672d3e27a38fc07b0b7a815" name="a578310a99672d3e27a38fc07b0b7a815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a578310a99672d3e27a38fc07b0b7a815">&#9670;&#160;</a></span>SPI_FLASH_TX_CTL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPI_FLASH_TX_CTL&#160;&#160;&#160;(<a class="el" href="spi__flash_8c.html#afa34b8813d828dddc6c8853041810691">SPI_FLASH_BASE</a> + 0x24)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00068">68</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<a id="a45ba202b05caf39795aeca91b0ae547e" name="a45ba202b05caf39795aeca91b0ae547e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45ba202b05caf39795aeca91b0ae547e">&#9670;&#160;</a></span>TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMEOUT&#160;&#160;&#160;(-1) /*MS*/</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00041">41</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a23d1f759627afdedeb961dd12aec2c7d" name="a23d1f759627afdedeb961dd12aec2c7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23d1f759627afdedeb961dd12aec2c7d">&#9670;&#160;</a></span>spi_flash_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> spi_flash_enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td>
          <td class="paramname"><em>enable</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00529">529</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  530</span>{</div>
<div class="line"><span class="lineno">  531</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  532</span>    <span class="keywordflow">if</span>(<a class="code hl_define" href="nmasic_8h.html#a1ae6f0630ab56f5cbfdbbb5c363ec137">REV</a>(<a class="code hl_function" href="nmasic_8c.html#a2325ac5878275e4ca3f99675cf78be72">nmi_get_chipid</a>()) &gt;= <a class="code hl_define" href="nmasic_8h.html#a222553cdf7c83246ce1c9f0658689bce">REV_3A0</a>) {      </div>
<div class="line"><span class="lineno">  533</span>        <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> u32Val;</div>
<div class="line"><span class="lineno">  534</span>        </div>
<div class="line"><span class="lineno">  535</span>        <span class="comment">/* Enable pinmux to SPI flash. */</span></div>
<div class="line"><span class="lineno">  536</span>        s8Ret = <a class="code hl_function" href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a>(0x1410, &amp;u32Val);</div>
<div class="line"><span class="lineno">  537</span>        <span class="keywordflow">if</span>(s8Ret != <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>) {</div>
<div class="line"><span class="lineno">  538</span>            <span class="keywordflow">goto</span> ERR1;</div>
<div class="line"><span class="lineno">  539</span>        }</div>
<div class="line"><span class="lineno">  540</span>        <span class="comment">/* GPIO15/16/17/18 */</span></div>
<div class="line"><span class="lineno">  541</span>        u32Val &amp;= ~((0x7777ul) &lt;&lt; 12);</div>
<div class="line"><span class="lineno">  542</span>        <span class="keywordflow">if</span>(enable) {</div>
<div class="line"><span class="lineno">  543</span>            u32Val |= ((0x1111ul) &lt;&lt; 12);</div>
<div class="line"><span class="lineno">  544</span>            <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(0x1410, u32Val);</div>
<div class="line"><span class="lineno">  545</span>            <a class="code hl_function" href="spi__flash_8c.html#a45ffec24fbdc418f574fd2769a6b6ac9">spi_flash_leave_low_power_mode</a>();</div>
<div class="line"><span class="lineno">  546</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  547</span>            <a class="code hl_function" href="spi__flash_8c.html#ab812ecc64869be5109c38fec4cd976d3">spi_flash_enter_low_power_mode</a>();</div>
<div class="line"><span class="lineno">  548</span>            <span class="comment">/* Disable pinmux to SPI flash to minimize leakage. */</span></div>
<div class="line"><span class="lineno">  549</span>            u32Val |= ((0x0010ul) &lt;&lt; 12);</div>
<div class="line"><span class="lineno">  550</span>            <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(0x1410, u32Val);</div>
<div class="line"><span class="lineno">  551</span>        }</div>
<div class="line"><span class="lineno">  552</span>    }</div>
<div class="line"><span class="lineno">  553</span>ERR1:</div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">return</span> s8Ret;</div>
<div class="line"><span class="lineno">  555</span>}</div>
<div class="ttc" id="agroup___c_o_m_m_o_n_d_e_f_html_ga9ef27ba27aafdd1aa3a79d3ba2c36b8f"><div class="ttname"><a href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a></div><div class="ttdeci">#define M2M_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="nm__common_8h_source.html#l00054">nm_common.h:54</a></div></div>
<div class="ttc" id="agroup___data_t_html_ga100e7c691a47d6978527c479a0158245"><div class="ttname"><a href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a></div><div class="ttdeci">unsigned long uint32</div><div class="ttdoc">Range of values between 0 to 4294967295.</div><div class="ttdef"><b>Definition:</b> <a href="nm__bsp_8h_source.html#l00107">nm_bsp.h:107</a></div></div>
<div class="ttc" id="agroup___data_t_html_gae35f10ffd0ac8dd2bc3e794da9bdfbc7"><div class="ttname"><a href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a></div><div class="ttdeci">signed char sint8</div><div class="ttdoc">Range of values between -128 to 127.</div><div class="ttdef"><b>Definition:</b> <a href="nm__bsp_8h_source.html#l00114">nm_bsp.h:114</a></div></div>
<div class="ttc" id="anmasic_8c_html_a2325ac5878275e4ca3f99675cf78be72"><div class="ttname"><a href="nmasic_8c.html#a2325ac5878275e4ca3f99675cf78be72">nmi_get_chipid</a></div><div class="ttdeci">uint32 nmi_get_chipid(void)</div><div class="ttdef"><b>Definition:</b> <a href="nmasic_8c_source.html#l00166">nmasic.c:166</a></div></div>
<div class="ttc" id="anmasic_8h_html_a1ae6f0630ab56f5cbfdbbb5c363ec137"><div class="ttname"><a href="nmasic_8h.html#a1ae6f0630ab56f5cbfdbbb5c363ec137">REV</a></div><div class="ttdeci">#define REV(id)</div><div class="ttdef"><b>Definition:</b> <a href="nmasic_8h_source.html#l00066">nmasic.h:66</a></div></div>
<div class="ttc" id="anmasic_8h_html_a222553cdf7c83246ce1c9f0658689bce"><div class="ttname"><a href="nmasic_8h.html#a222553cdf7c83246ce1c9f0658689bce">REV_3A0</a></div><div class="ttdeci">#define REV_3A0</div><div class="ttdef"><b>Definition:</b> <a href="nmasic_8h_source.html#l00061">nmasic.h:61</a></div></div>
<div class="ttc" id="anmbus_8c_html_a475d273d8342f3f5c2a00e2887bf1b4f"><div class="ttname"><a href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a></div><div class="ttdeci">sint8 nm_read_reg_with_ret(uint32 u32Addr, uint32 *pu32RetVal)</div><div class="ttdef"><b>Definition:</b> <a href="nmbus_8c_source.html#l00146">nmbus.c:146</a></div></div>
<div class="ttc" id="anmbus_8c_html_a6a7d6b943cea86630575707ef80e09f9"><div class="ttname"><a href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a></div><div class="ttdeci">sint8 nm_write_reg(uint32 u32Addr, uint32 u32Val)</div><div class="ttdef"><b>Definition:</b> <a href="nmbus_8c_source.html#l00171">nmbus.c:171</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a45ffec24fbdc418f574fd2769a6b6ac9"><div class="ttname"><a href="spi__flash_8c.html#a45ffec24fbdc418f574fd2769a6b6ac9">spi_flash_leave_low_power_mode</a></div><div class="ttdeci">static void spi_flash_leave_low_power_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00507">spi_flash.c:507</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_ab812ecc64869be5109c38fec4cd976d3"><div class="ttname"><a href="spi__flash_8c.html#ab812ecc64869be5109c38fec4cd976d3">spi_flash_enter_low_power_mode</a></div><div class="ttdeci">static void spi_flash_enter_low_power_mode(void)</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00492">spi_flash.c:492</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00146">nm_read_reg_with_ret()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="nmasic_8c_source.html#l00166">nmi_get_chipid()</a>, <a class="el" href="nmasic_8h_source.html#l00066">REV</a>, <a class="el" href="nmasic_8h_source.html#l00061">REV_3A0</a>, <a class="el" href="spi__flash_8c_source.html#l00492">spi_flash_enter_low_power_mode()</a>, and <a class="el" href="spi__flash_8c_source.html#l00507">spi_flash_leave_low_power_mode()</a>.</p>

<p class="reference">Referenced by <a class="el" href="nmdrv_8c_source.html#l00379">nm_drv_deinit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_a23d1f759627afdedeb961dd12aec2c7d_cgraph.gif" border="0" usemap="#aspi__flash_8c_a23d1f759627afdedeb961dd12aec2c7d_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ab812ecc64869be5109c38fec4cd976d3" name="ab812ecc64869be5109c38fec4cd976d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab812ecc64869be5109c38fec4cd976d3">&#9670;&#160;</a></span>spi_flash_enter_low_power_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spi_flash_enter_low_power_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00492">492</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  492</span>                                                 {</div>
<div class="line"><span class="lineno">  493</span>    <span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> tmp;</div>
<div class="line"><span class="lineno">  494</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* cmd = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) &amp;tmp;</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>    cmd[0] = 0xb9;</div>
<div class="line"><span class="lineno">  497</span> </div>
<div class="line"><span class="lineno">  498</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, 0);</div>
<div class="line"><span class="lineno">  499</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]);</div>
<div class="line"><span class="lineno">  500</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x1);</div>
<div class="line"><span class="lineno">  501</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, 0);</div>
<div class="line"><span class="lineno">  502</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>, 1 | (1 &lt;&lt; 7));</div>
<div class="line"><span class="lineno">  503</span>    <span class="keywordflow">while</span>(<a class="code hl_function" href="nmbus_8c.html#a40095d9f8d9cd502b40d93015c93af24">nm_read_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>) != 1);</div>
<div class="line"><span class="lineno">  504</span>}</div>
<div class="ttc" id="anmbus_8c_html_a40095d9f8d9cd502b40d93015c93af24"><div class="ttname"><a href="nmbus_8c.html#a40095d9f8d9cd502b40d93015c93af24">nm_read_reg</a></div><div class="ttdeci">uint32 nm_read_reg(uint32 u32Addr)</div><div class="ttdef"><b>Definition:</b> <a href="nmbus_8c_source.html#l00120">nmbus.c:120</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a05fbdafcafd204b546e76cfe7b1ab2e2"><div class="ttname"><a href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a></div><div class="ttdeci">#define SPI_FLASH_BUF1</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00062">spi_flash.c:62</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a2b6b1ae66fe39d7d191e17148bfadd27"><div class="ttname"><a href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a></div><div class="ttdeci">#define SPI_FLASH_CMD_CNT</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00060">spi_flash.c:60</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a3f25744fc26fd7b8c7fb5711bba0ebd9"><div class="ttname"><a href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a></div><div class="ttdeci">#define SPI_FLASH_BUF_DIR</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00064">spi_flash.c:64</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a70b0c65b5e77a8aa07cc95607e6dc992"><div class="ttname"><a href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a></div><div class="ttdeci">#define SPI_FLASH_DMA_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00066">spi_flash.c:66</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a9ce6155adb0ea813ad9b25af8b320289"><div class="ttname"><a href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a></div><div class="ttdeci">#define SPI_FLASH_TR_DONE</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00065">spi_flash.c:65</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_ada57e0fafb17fd8bac3cd236b75400db"><div class="ttname"><a href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a></div><div class="ttdeci">#define SPI_FLASH_DATA_CNT</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00061">spi_flash.c:61</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="nmbus_8c_source.html#l00120">nm_read_reg()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00529">spi_flash_enable()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_ab812ecc64869be5109c38fec4cd976d3_cgraph.gif" border="0" usemap="#aspi__flash_8c_ab812ecc64869be5109c38fec4cd976d3_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a45ffec24fbdc418f574fd2769a6b6ac9" name="a45ffec24fbdc418f574fd2769a6b6ac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45ffec24fbdc418f574fd2769a6b6ac9">&#9670;&#160;</a></span>spi_flash_leave_low_power_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void spi_flash_leave_low_power_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00507">507</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  507</span>                                                 {</div>
<div class="line"><span class="lineno">  508</span>    <span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> tmp;</div>
<div class="line"><span class="lineno">  509</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* cmd = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) &amp;tmp;</div>
<div class="line"><span class="lineno">  510</span> </div>
<div class="line"><span class="lineno">  511</span>    cmd[0] = 0xab;</div>
<div class="line"><span class="lineno">  512</span> </div>
<div class="line"><span class="lineno">  513</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, 0);</div>
<div class="line"><span class="lineno">  514</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]);</div>
<div class="line"><span class="lineno">  515</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x1);</div>
<div class="line"><span class="lineno">  516</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, 0);</div>
<div class="line"><span class="lineno">  517</span>    <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>,  1 | (1 &lt;&lt; 7));</div>
<div class="line"><span class="lineno">  518</span>    <span class="keywordflow">while</span>(<a class="code hl_function" href="nmbus_8c.html#a40095d9f8d9cd502b40d93015c93af24">nm_read_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>) != 1);</div>
<div class="line"><span class="lineno">  519</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="nmbus_8c_source.html#l00120">nm_read_reg()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00529">spi_flash_enable()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_a45ffec24fbdc418f574fd2769a6b6ac9_cgraph.gif" border="0" usemap="#aspi__flash_8c_a45ffec24fbdc418f574fd2769a6b6ac9_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a475b82d7678da3ae2a3e2a0051bcea10" name="a475b82d7678da3ae2a3e2a0051bcea10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a475b82d7678da3ae2a3e2a0051bcea10">&#9670;&#160;</a></span>spi_flash_load_to_cortus_mem()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> spi_flash_load_to_cortus_mem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32MemAdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32FlashAdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32Sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00217">217</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  218</span>{</div>
<div class="line"><span class="lineno">  219</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> cmd[5];</div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>  val = 0;</div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>    cmd[0] = 0x0b;</div>
<div class="line"><span class="lineno">  224</span>    cmd[1] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr &gt;&gt; 16);</div>
<div class="line"><span class="lineno">  225</span>    cmd[2] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr &gt;&gt; 8);</div>
<div class="line"><span class="lineno">  226</span>    cmd[3] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr);</div>
<div class="line"><span class="lineno">  227</span>    cmd[4] = 0xA5;</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, u32Sz);</div>
<div class="line"><span class="lineno">  230</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[1])&lt;&lt;8)|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[2])&lt;&lt;16)|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[3])&lt;&lt;24));</div>
<div class="line"><span class="lineno">  231</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a5130ca7c4d089c6e3d6bfaba588485f6">SPI_FLASH_BUF2</a>, cmd[4]);</div>
<div class="line"><span class="lineno">  232</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x1f);</div>
<div class="line"><span class="lineno">  233</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, u32MemAdr);</div>
<div class="line"><span class="lineno">  234</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>, 5 | (1&lt;&lt;7));</div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  236</span>    {</div>
<div class="line"><span class="lineno">  237</span>        ret += <a class="code hl_function" href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>, (<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> *)&amp;val);</div>
<div class="line"><span class="lineno">  238</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  239</span>    }</div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">while</span>(val != 1);</div>
<div class="line"><span class="lineno">  241</span> </div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  243</span>}</div>
<div class="ttc" id="agroup___data_t_html_ga4df709a77647e870bbf1d955b8edc9a6"><div class="ttname"><a href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdoc">Range of values between 0 to 255.</div><div class="ttdef"><b>Definition:</b> <a href="nm__bsp_8h_source.html#l00093">nm_bsp.h:93</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a5130ca7c4d089c6e3d6bfaba588485f6"><div class="ttname"><a href="spi__flash_8c.html#a5130ca7c4d089c6e3d6bfaba588485f6">SPI_FLASH_BUF2</a></div><div class="ttdeci">#define SPI_FLASH_BUF2</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00063">spi_flash.c:63</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00146">nm_read_reg_with_ret()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00063">SPI_FLASH_BUF2</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00393">spi_flash_read_internal()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_a475b82d7678da3ae2a3e2a0051bcea10_cgraph.gif" border="0" usemap="#aspi__flash_8c_a475b82d7678da3ae2a3e2a0051bcea10_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ade5932b86421839ecea86f01b5fba36f" name="ade5932b86421839ecea86f01b5fba36f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade5932b86421839ecea86f01b5fba36f">&#9670;&#160;</a></span>spi_flash_page_program()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> spi_flash_page_program </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32MemAdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32FlashAdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32Sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00354">354</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  355</span>{</div>
<div class="line"><span class="lineno">  356</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> cmd[4];</div>
<div class="line"><span class="lineno">  357</span>    <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>  val = 0;</div>
<div class="line"><span class="lineno">  358</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  359</span> </div>
<div class="line"><span class="lineno">  360</span>    cmd[0] = 0x02;</div>
<div class="line"><span class="lineno">  361</span>    cmd[1] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr &gt;&gt; 16);</div>
<div class="line"><span class="lineno">  362</span>    cmd[2] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr &gt;&gt; 8);</div>
<div class="line"><span class="lineno">  363</span>    cmd[3] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr);</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, 0);</div>
<div class="line"><span class="lineno">  366</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[1])&lt;&lt;8)|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[2])&lt;&lt;16)|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[3])&lt;&lt;24));</div>
<div class="line"><span class="lineno">  367</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x0f);</div>
<div class="line"><span class="lineno">  368</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, u32MemAdr);</div>
<div class="line"><span class="lineno">  369</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>, 4 | (1&lt;&lt;7) | ((u32Sz &amp; 0xfffff) &lt;&lt; 8));</div>
<div class="line"><span class="lineno">  370</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  371</span>    {</div>
<div class="line"><span class="lineno">  372</span>        ret += <a class="code hl_function" href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>, (<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> *)&amp;val);</div>
<div class="line"><span class="lineno">  373</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  374</span>    }</div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">while</span>(val != 1);</div>
<div class="line"><span class="lineno">  376</span> </div>
<div class="line"><span class="lineno">  377</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  378</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00146">nm_read_reg_with_ret()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00417">spi_flash_pp()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_ade5932b86421839ecea86f01b5fba36f_cgraph.gif" border="0" usemap="#aspi__flash_8c_ade5932b86421839ecea86f01b5fba36f_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ab395d13e0f6d9eea13113e6a5239b9a3" name="ab395d13e0f6d9eea13113e6a5239b9a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab395d13e0f6d9eea13113e6a5239b9a3">&#9670;&#160;</a></span>spi_flash_pp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> spi_flash_pp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32Offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *&#160;</td>
          <td class="paramname"><em>pu8Buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a>&#160;</td>
          <td class="paramname"><em>u16Sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00417">417</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  418</span>{</div>
<div class="line"><span class="lineno">  419</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  420</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> tmp;</div>
<div class="line"><span class="lineno">  421</span>    <a class="code hl_function" href="spi__flash_8c.html#a7b91b3c61b2e3789005aa262e797fbd9">spi_flash_write_enable</a>();</div>
<div class="line"><span class="lineno">  422</span>    <span class="comment">/* use shared packet memory as temp mem */</span></div>
<div class="line"><span class="lineno">  423</span>    ret += <a class="code hl_function" href="nmbus_8c.html#afb924df7f944a8137cd51069512661cf">nm_write_block</a>(<a class="code hl_define" href="spi__flash_8c.html#a6c21f46c5ebd7fa5b914b01e62c1f313">HOST_SHARE_MEM_BASE</a>, pu8Buf, u16Sz);</div>
<div class="line"><span class="lineno">  424</span>    ret += <a class="code hl_function" href="spi__flash_8c.html#ade5932b86421839ecea86f01b5fba36f">spi_flash_page_program</a>(<a class="code hl_define" href="spi__flash_8c.html#a6c21f46c5ebd7fa5b914b01e62c1f313">HOST_SHARE_MEM_BASE</a>, u32Offset, u16Sz);</div>
<div class="line"><span class="lineno">  425</span>    ret += <a class="code hl_function" href="spi__flash_8c.html#a7e09bf962df484865b899faf2aed8846">spi_flash_read_status_reg</a>(&amp;tmp);</div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  427</span>    {</div>
<div class="line"><span class="lineno">  428</span>        <span class="keywordflow">if</span>(ret != <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>) <span class="keywordflow">goto</span> ERR;</div>
<div class="line"><span class="lineno">  429</span>        ret += <a class="code hl_function" href="spi__flash_8c.html#a7e09bf962df484865b899faf2aed8846">spi_flash_read_status_reg</a>(&amp;tmp);</div>
<div class="line"><span class="lineno">  430</span>    }<span class="keywordflow">while</span>(tmp &amp; 0x01);</div>
<div class="line"><span class="lineno">  431</span>    ret += <a class="code hl_function" href="spi__flash_8c.html#a9848c51ff872cc056b972a07db96a7ee">spi_flash_write_disable</a>();</div>
<div class="line"><span class="lineno">  432</span>ERR:</div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  434</span>}</div>
<div class="ttc" id="anmbus_8c_html_afb924df7f944a8137cd51069512661cf"><div class="ttname"><a href="nmbus_8c.html#afb924df7f944a8137cd51069512661cf">nm_write_block</a></div><div class="ttdeci">sint8 nm_write_block(uint32 u32Addr, uint8 *puBuf, uint32 u32Sz)</div><div class="ttdef"><b>Definition:</b> <a href="nmbus_8c_source.html#l00264">nmbus.c:264</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a6c21f46c5ebd7fa5b914b01e62c1f313"><div class="ttname"><a href="spi__flash_8c.html#a6c21f46c5ebd7fa5b914b01e62c1f313">HOST_SHARE_MEM_BASE</a></div><div class="ttdeci">#define HOST_SHARE_MEM_BASE</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00051">spi_flash.c:51</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a7b91b3c61b2e3789005aa262e797fbd9"><div class="ttname"><a href="spi__flash_8c.html#a7b91b3c61b2e3789005aa262e797fbd9">spi_flash_write_enable</a></div><div class="ttdeci">static sint8 spi_flash_write_enable(void)</div><div class="ttdoc">Send write enable command to SPI flash.</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00289">spi_flash.c:289</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a7e09bf962df484865b899faf2aed8846"><div class="ttname"><a href="spi__flash_8c.html#a7e09bf962df484865b899faf2aed8846">spi_flash_read_status_reg</a></div><div class="ttdeci">static sint8 spi_flash_read_status_reg(uint8 *val)</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00084">spi_flash.c:84</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a9848c51ff872cc056b972a07db96a7ee"><div class="ttname"><a href="spi__flash_8c.html#a9848c51ff872cc056b972a07db96a7ee">spi_flash_write_disable</a></div><div class="ttdeci">static sint8 spi_flash_write_disable(void)</div><div class="ttdoc">Send write disable command to SPI flash.</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00319">spi_flash.c:319</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_ade5932b86421839ecea86f01b5fba36f"><div class="ttname"><a href="spi__flash_8c.html#ade5932b86421839ecea86f01b5fba36f">spi_flash_page_program</a></div><div class="ttdeci">static sint8 spi_flash_page_program(uint32 u32MemAdr, uint32 u32FlashAdr, uint32 u32Sz)</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00354">spi_flash.c:354</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spi__flash_8c_source.html#l00051">HOST_SHARE_MEM_BASE</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00264">nm_write_block()</a>, <a class="el" href="spi__flash_8c_source.html#l00354">spi_flash_page_program()</a>, <a class="el" href="spi__flash_8c_source.html#l00084">spi_flash_read_status_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00319">spi_flash_write_disable()</a>, and <a class="el" href="spi__flash_8c_source.html#l00289">spi_flash_write_enable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00604">spi_flash_write()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_ab395d13e0f6d9eea13113e6a5239b9a3_cgraph.gif" border="0" usemap="#aspi__flash_8c_ab395d13e0f6d9eea13113e6a5239b9a3_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ac35698ef9a48b4ab73a5901e3f094c54" name="ac35698ef9a48b4ab73a5901e3f094c54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac35698ef9a48b4ab73a5901e3f094c54">&#9670;&#160;</a></span>spi_flash_rdid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">spi_flash_rdid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read SPI Flash ID. </p>
<dl class="section return"><dt>Returns</dt><dd>SPI FLash ID </dd></dl>
<dl class="section author"><dt>Author</dt><dd>M.S.M </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00443">443</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  444</span>{</div>
<div class="line"><span class="lineno">  445</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> cmd[1];</div>
<div class="line"><span class="lineno">  446</span>    <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> reg = 0;</div>
<div class="line"><span class="lineno">  447</span>    <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> cnt = 0;</div>
<div class="line"><span class="lineno">  448</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>    cmd[0] = 0x9f;</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, 4);</div>
<div class="line"><span class="lineno">  453</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]);</div>
<div class="line"><span class="lineno">  454</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x1);</div>
<div class="line"><span class="lineno">  455</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, <a class="code hl_define" href="spi__flash_8c.html#a71be2eb3e4ec829627e4fbd389fda4eb">DUMMY_REGISTER</a>);</div>
<div class="line"><span class="lineno">  456</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>, 1 | (1&lt;&lt;7));</div>
<div class="line"><span class="lineno">  457</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  458</span>    {</div>
<div class="line"><span class="lineno">  459</span>        ret += <a class="code hl_function" href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>, (<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> *)&amp;reg);</div>
<div class="line"><span class="lineno">  460</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  461</span>        <span class="keywordflow">if</span>(++cnt &gt; 500)</div>
<div class="line"><span class="lineno">  462</span>        {</div>
<div class="line"><span class="lineno">  463</span>            ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga6e6f755f4bf0992c3f75c6e7631ba006">M2M_ERR_INIT</a>;</div>
<div class="line"><span class="lineno">  464</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  465</span>        }</div>
<div class="line"><span class="lineno">  466</span>    }</div>
<div class="line"><span class="lineno">  467</span>    <span class="keywordflow">while</span>(reg != 1);</div>
<div class="line"><span class="lineno">  468</span>    reg = (<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> == ret)?(<a class="code hl_function" href="nmbus_8c.html#a40095d9f8d9cd502b40d93015c93af24">nm_read_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a71be2eb3e4ec829627e4fbd389fda4eb">DUMMY_REGISTER</a>)):(0);</div>
<div class="line"><span class="lineno">  469</span>    <a class="code hl_define" href="group___debug_defines.html#ga151ceaaab8f30c48e1e6aec3f3eff194">M2M_PRINT</a>(<span class="stringliteral">&quot;Flash ID %x \n&quot;</span>,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)reg);</div>
<div class="line"><span class="lineno">  470</span>    <span class="keywordflow">return</span> reg;</div>
<div class="line"><span class="lineno">  471</span>}</div>
<div class="ttc" id="agroup___c_o_m_m_o_n_d_e_f_html_ga6e6f755f4bf0992c3f75c6e7631ba006"><div class="ttname"><a href="group___c_o_m_m_o_n_d_e_f.html#ga6e6f755f4bf0992c3f75c6e7631ba006">M2M_ERR_INIT</a></div><div class="ttdeci">#define M2M_ERR_INIT</div><div class="ttdef"><b>Definition:</b> <a href="nm__common_8h_source.html#l00059">nm_common.h:59</a></div></div>
<div class="ttc" id="agroup___debug_defines_html_ga151ceaaab8f30c48e1e6aec3f3eff194"><div class="ttname"><a href="group___debug_defines.html#ga151ceaaab8f30c48e1e6aec3f3eff194">M2M_PRINT</a></div><div class="ttdeci">#define M2M_PRINT(...)</div><div class="ttdef"><b>Definition:</b> <a href="nm__debug_8h_source.html#l00064">nm_debug.h:64</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a71be2eb3e4ec829627e4fbd389fda4eb"><div class="ttname"><a href="spi__flash_8c.html#a71be2eb3e4ec829627e4fbd389fda4eb">DUMMY_REGISTER</a></div><div class="ttdeci">#define DUMMY_REGISTER</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00039">spi_flash.c:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spi__flash_8c_source.html#l00039">DUMMY_REGISTER</a>, <a class="el" href="nm__common_8h_source.html#l00059">M2M_ERR_INIT</a>, <a class="el" href="nm__debug_8h_source.html#l00064">M2M_PRINT</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00120">nm_read_reg()</a>, <a class="el" href="nmbus_8c_source.html#l00146">nm_read_reg_with_ret()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00719">spi_flash_get_size()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_ac35698ef9a48b4ab73a5901e3f094c54_cgraph.gif" border="0" usemap="#aspi__flash_8c_ac35698ef9a48b4ab73a5901e3f094c54_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="aa244cce032983541b1bb20d1d06500f2" name="aa244cce032983541b1bb20d1d06500f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa244cce032983541b1bb20d1d06500f2">&#9670;&#160;</a></span>spi_flash_read_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> spi_flash_read_internal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *&#160;</td>
          <td class="paramname"><em>pu8Buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32Addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32Sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00393">393</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  394</span>{</div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  396</span>    <span class="comment">/* read size must be &lt; 64KB */</span></div>
<div class="line"><span class="lineno">  397</span>    ret = <a class="code hl_function" href="spi__flash_8c.html#a475b82d7678da3ae2a3e2a0051bcea10">spi_flash_load_to_cortus_mem</a>(<a class="code hl_define" href="spi__flash_8c.html#a6c21f46c5ebd7fa5b914b01e62c1f313">HOST_SHARE_MEM_BASE</a>, u32Addr, u32Sz);</div>
<div class="line"><span class="lineno">  398</span>    <span class="keywordflow">if</span>(<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) <span class="keywordflow">goto</span> ERR;</div>
<div class="line"><span class="lineno">  399</span>    ret = <a class="code hl_function" href="nmbus_8c.html#af1e8ce2caa79fdd112216a9f36f103a0">nm_read_block</a>(<a class="code hl_define" href="spi__flash_8c.html#a6c21f46c5ebd7fa5b914b01e62c1f313">HOST_SHARE_MEM_BASE</a>, pu8Buf, u32Sz);</div>
<div class="line"><span class="lineno">  400</span>ERR:</div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  402</span>} </div>
<div class="ttc" id="anmbus_8c_html_af1e8ce2caa79fdd112216a9f36f103a0"><div class="ttname"><a href="nmbus_8c.html#af1e8ce2caa79fdd112216a9f36f103a0">nm_read_block</a></div><div class="ttdeci">sint8 nm_read_block(uint32 u32Addr, uint8 *puBuf, uint32 u32Sz)</div><div class="ttdef"><b>Definition:</b> <a href="nmbus_8c_source.html#l00211">nmbus.c:211</a></div></div>
<div class="ttc" id="aspi__flash_8c_html_a475b82d7678da3ae2a3e2a0051bcea10"><div class="ttname"><a href="spi__flash_8c.html#a475b82d7678da3ae2a3e2a0051bcea10">spi_flash_load_to_cortus_mem</a></div><div class="ttdeci">static sint8 spi_flash_load_to_cortus_mem(uint32 u32MemAdr, uint32 u32FlashAdr, uint32 u32Sz)</div><div class="ttdef"><b>Definition:</b> <a href="spi__flash_8c_source.html#l00217">spi_flash.c:217</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spi__flash_8c_source.html#l00051">HOST_SHARE_MEM_BASE</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00211">nm_read_block()</a>, and <a class="el" href="spi__flash_8c_source.html#l00217">spi_flash_load_to_cortus_mem()</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00570">spi_flash_read()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_aa244cce032983541b1bb20d1d06500f2_cgraph.gif" border="0" usemap="#aspi__flash_8c_aa244cce032983541b1bb20d1d06500f2_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a7e09bf962df484865b899faf2aed8846" name="a7e09bf962df484865b899faf2aed8846"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e09bf962df484865b899faf2aed8846">&#9670;&#160;</a></span>spi_flash_read_status_reg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> spi_flash_read_status_reg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00084">84</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   85</span>{</div>
<div class="line"><span class="lineno">   86</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">   87</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> cmd[1];</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> reg;</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>    cmd[0] = 0x05;</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, 4);</div>
<div class="line"><span class="lineno">   93</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]);</div>
<div class="line"><span class="lineno">   94</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x01);</div>
<div class="line"><span class="lineno">   95</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, <a class="code hl_define" href="spi__flash_8c.html#a71be2eb3e4ec829627e4fbd389fda4eb">DUMMY_REGISTER</a>);</div>
<div class="line"><span class="lineno">   96</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>, 1 | (1&lt;&lt;7));</div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">   98</span>    {</div>
<div class="line"><span class="lineno">   99</span>        ret += <a class="code hl_function" href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>, (<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> *)&amp;reg);</div>
<div class="line"><span class="lineno">  100</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  101</span>    }</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordflow">while</span>(reg != 1);</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>    reg = (<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> == ret)?(<a class="code hl_function" href="nmbus_8c.html#a40095d9f8d9cd502b40d93015c93af24">nm_read_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a71be2eb3e4ec829627e4fbd389fda4eb">DUMMY_REGISTER</a>)):(0);</div>
<div class="line"><span class="lineno">  105</span>    *val = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(reg &amp; 0xff);</div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  107</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="spi__flash_8c_source.html#l00039">DUMMY_REGISTER</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00120">nm_read_reg()</a>, <a class="el" href="nmbus_8c_source.html#l00146">nm_read_reg_with_ret()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00681">spi_flash_erase()</a>, and <a class="el" href="spi__flash_8c_source.html#l00417">spi_flash_pp()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_a7e09bf962df484865b899faf2aed8846_cgraph.gif" border="0" usemap="#aspi__flash_8c_a7e09bf962df484865b899faf2aed8846_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ae72ea225fe1018383320f440e5ed60ee" name="ae72ea225fe1018383320f440e5ed60ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae72ea225fe1018383320f440e5ed60ee">&#9670;&#160;</a></span>spi_flash_sector_erase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> spi_flash_sector_erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>&#160;</td>
          <td class="paramname"><em>u32FlashAdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00255">255</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  256</span>{</div>
<div class="line"><span class="lineno">  257</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> cmd[4];</div>
<div class="line"><span class="lineno">  258</span>    <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>  val = 0;</div>
<div class="line"><span class="lineno">  259</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  260</span> </div>
<div class="line"><span class="lineno">  261</span>    cmd[0] = 0x20;</div>
<div class="line"><span class="lineno">  262</span>    cmd[1] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr &gt;&gt; 16);</div>
<div class="line"><span class="lineno">  263</span>    cmd[2] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr &gt;&gt; 8);</div>
<div class="line"><span class="lineno">  264</span>    cmd[3] = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(u32FlashAdr);</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, 0);</div>
<div class="line"><span class="lineno">  267</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[1])&lt;&lt;8)|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[2])&lt;&lt;16)|(((<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>)cmd[3])&lt;&lt;24));</div>
<div class="line"><span class="lineno">  268</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x0f);</div>
<div class="line"><span class="lineno">  269</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, 0);</div>
<div class="line"><span class="lineno">  270</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>, 4 | (1&lt;&lt;7));</div>
<div class="line"><span class="lineno">  271</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  272</span>    {</div>
<div class="line"><span class="lineno">  273</span>        ret += <a class="code hl_function" href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>, (<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> *)&amp;val);</div>
<div class="line"><span class="lineno">  274</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  275</span>    }</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">while</span>(val != 1);</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  279</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00146">nm_read_reg_with_ret()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00681">spi_flash_erase()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_ae72ea225fe1018383320f440e5ed60ee_cgraph.gif" border="0" usemap="#aspi__flash_8c_ae72ea225fe1018383320f440e5ed60ee_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a9848c51ff872cc056b972a07db96a7ee" name="a9848c51ff872cc056b972a07db96a7ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9848c51ff872cc056b972a07db96a7ee">&#9670;&#160;</a></span>spi_flash_write_disable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">spi_flash_write_disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send write disable command to SPI flash. </p>
<dl class="section note"><dt>Note</dt><dd>Compatible with MX25L6465E and should be working with other types </dd></dl>
<dl class="section author"><dt>Author</dt><dd>M. Abdelmawla </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00319">319</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  320</span>{</div>
<div class="line"><span class="lineno">  321</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> cmd[1];</div>
<div class="line"><span class="lineno">  322</span>    <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>  val = 0;</div>
<div class="line"><span class="lineno">  323</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  324</span>    cmd[0] = 0x04;</div>
<div class="line"><span class="lineno">  325</span> </div>
<div class="line"><span class="lineno">  326</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, 0);</div>
<div class="line"><span class="lineno">  327</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]);</div>
<div class="line"><span class="lineno">  328</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x01);</div>
<div class="line"><span class="lineno">  329</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, 0);</div>
<div class="line"><span class="lineno">  330</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>, 1 | (1&lt;&lt;7));</div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  332</span>    {</div>
<div class="line"><span class="lineno">  333</span>        ret += <a class="code hl_function" href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>, (<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> *)&amp;val);</div>
<div class="line"><span class="lineno">  334</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  335</span>    }</div>
<div class="line"><span class="lineno">  336</span>    <span class="keywordflow">while</span>(val != 1);</div>
<div class="line"><span class="lineno">  337</span> </div>
<div class="line"><span class="lineno">  338</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  339</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00146">nm_read_reg_with_ret()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00417">spi_flash_pp()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_a9848c51ff872cc056b972a07db96a7ee_cgraph.gif" border="0" usemap="#aspi__flash_8c_a9848c51ff872cc056b972a07db96a7ee_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a7b91b3c61b2e3789005aa262e797fbd9" name="a7b91b3c61b2e3789005aa262e797fbd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b91b3c61b2e3789005aa262e797fbd9">&#9670;&#160;</a></span>spi_flash_write_enable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">spi_flash_write_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send write enable command to SPI flash. </p>
<dl class="section return"><dt>Returns</dt><dd>Status of execution </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Compatible with MX25L6465E and should be working with other types </dd></dl>
<dl class="section author"><dt>Author</dt><dd>M. Abdelmawla </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="spi__flash_8c_source.html#l00289">289</a> of file <a class="el" href="spi__flash_8c_source.html">spi_flash.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span>{</div>
<div class="line"><span class="lineno">  291</span>    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> cmd[1];</div>
<div class="line"><span class="lineno">  292</span>    <a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a>  val = 0;</div>
<div class="line"><span class="lineno">  293</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno">  294</span> </div>
<div class="line"><span class="lineno">  295</span>    cmd[0] = 0x06;</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#ada57e0fafb17fd8bac3cd236b75400db">SPI_FLASH_DATA_CNT</a>, 0);</div>
<div class="line"><span class="lineno">  298</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a05fbdafcafd204b546e76cfe7b1ab2e2">SPI_FLASH_BUF1</a>, cmd[0]);</div>
<div class="line"><span class="lineno">  299</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a3f25744fc26fd7b8c7fb5711bba0ebd9">SPI_FLASH_BUF_DIR</a>, 0x01);</div>
<div class="line"><span class="lineno">  300</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a70b0c65b5e77a8aa07cc95607e6dc992">SPI_FLASH_DMA_ADDR</a>, 0);</div>
<div class="line"><span class="lineno">  301</span>    ret += <a class="code hl_function" href="nmbus_8c.html#a6a7d6b943cea86630575707ef80e09f9">nm_write_reg</a>(<a class="code hl_define" href="spi__flash_8c.html#a2b6b1ae66fe39d7d191e17148bfadd27">SPI_FLASH_CMD_CNT</a>, 1 | (1&lt;&lt;7));</div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordflow">do</span></div>
<div class="line"><span class="lineno">  303</span>    {</div>
<div class="line"><span class="lineno">  304</span>        ret += <a class="code hl_function" href="nmbus_8c.html#a475d273d8342f3f5c2a00e2887bf1b4f">nm_read_reg_with_ret</a>(<a class="code hl_define" href="spi__flash_8c.html#a9ce6155adb0ea813ad9b25af8b320289">SPI_FLASH_TR_DONE</a>, (<a class="code hl_typedef" href="group___data_t.html#ga100e7c691a47d6978527c479a0158245">uint32</a> *)&amp;val);</div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> != ret) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  306</span>    }</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordflow">while</span>(val != 1);</div>
<div class="line"><span class="lineno">  308</span> </div>
<div class="line"><span class="lineno">  309</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  310</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="nmbus_8c_source.html#l00146">nm_read_reg_with_ret()</a>, <a class="el" href="nmbus_8c_source.html#l00171">nm_write_reg()</a>, <a class="el" href="spi__flash_8c_source.html#l00062">SPI_FLASH_BUF1</a>, <a class="el" href="spi__flash_8c_source.html#l00064">SPI_FLASH_BUF_DIR</a>, <a class="el" href="spi__flash_8c_source.html#l00060">SPI_FLASH_CMD_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00061">SPI_FLASH_DATA_CNT</a>, <a class="el" href="spi__flash_8c_source.html#l00066">SPI_FLASH_DMA_ADDR</a>, and <a class="el" href="spi__flash_8c_source.html#l00065">SPI_FLASH_TR_DONE</a>.</p>

<p class="reference">Referenced by <a class="el" href="spi__flash_8c_source.html#l00681">spi_flash_erase()</a>, and <a class="el" href="spi__flash_8c_source.html#l00417">spi_flash_pp()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="spi__flash_8c_a7b91b3c61b2e3789005aa262e797fbd9_cgraph.gif" border="0" usemap="#aspi__flash_8c_a7b91b3c61b2e3789005aa262e797fbd9_cgraph" alt=""/></div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Mar 11 2023 23:19:37 for WINC1500 Weather Client Demo for SAME70 Xplained by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
