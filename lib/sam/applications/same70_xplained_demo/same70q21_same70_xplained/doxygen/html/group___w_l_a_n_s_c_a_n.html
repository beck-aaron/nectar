<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WINC1500 Weather Client Demo for SAME70 Xplained: Scanning</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WINC1500 Weather Client Demo for SAME70 Xplained
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Scanning<div class="ingroups"><a class="el" href="group__m2m__wifi.html">WLAN</a> &raquo; <a class="el" href="group___w_l_a_n_a_p_i.html">Functions</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Here are listed all the functions that implement the Wifi Scanning APIs.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Scanning:</div>
<div class="dyncontent">
<div class="center"><img src="group___w_l_a_n_s_c_a_n.gif" border="0" usemap="#agroup______w__l__a__n__s__c__a__n" alt=""/></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac92223273822358f4aee6e133b11815d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#gac92223273822358f4aee6e133b11815d">m2m_wifi_get_num_ap_found</a> (void)</td></tr>
<tr class="memdesc:gac92223273822358f4aee6e133b11815d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the number of AP's found in the last Scan Request, The function read the number of AP's from global variable which updated in the wifi_cb in M2M_WIFI_RESP_SCAN_DONE. <br  />
  <br /></td></tr>
<tr class="separator:gac92223273822358f4aee6e133b11815d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2585ee08ee8ecac67155ec99dd4d0863"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> index)</td></tr>
<tr class="memdesc:ga2585ee08ee8ecac67155ec99dd4d0863"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the AP information from the Scan Result list with the given index, the response received in wifi_cb M2M_WIFI_RESP_SCAN_RESULT, the response pointer should be casted with <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> structure <br  />
  <br /></td></tr>
<tr class="separator:ga2585ee08ee8ecac67155ec99dd4d0863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga499dfa24a19c2e84776aeabedf897135"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> ch)</td></tr>
<tr class="memdesc:ga499dfa24a19c2e84776aeabedf897135"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronous API to request the WINC IC to scan for networks.  <br /></td></tr>
<tr class="separator:ga499dfa24a19c2e84776aeabedf897135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90de6cb6a97d4ed9e5cb602ac8c1728b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga90de6cb6a97d4ed9e5cb602ac8c1728b">m2m_wifi_request_scan_passive</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> ch, <a class="el" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a> scan_time)</td></tr>
<tr class="memdesc:ga90de6cb6a97d4ed9e5cb602ac8c1728b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Similar to <a class="el" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a> but performs passive scanning instead of active scanning.  <br /></td></tr>
<tr class="separator:ga90de6cb6a97d4ed9e5cb602ac8c1728b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga75bf26a8550eb98553ade6a81823ad87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga75bf26a8550eb98553ade6a81823ad87">m2m_wifi_request_scan_ssid_list</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> ch, <a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *u8Ssidlist)</td></tr>
<tr class="memdesc:ga75bf26a8550eb98553ade6a81823ad87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronous wi-fi scan request on the given channel and the hidden scan list.  <br /></td></tr>
<tr class="separator:ga75bf26a8550eb98553ade6a81823ad87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga662d0fc587b91c6835e7f4c00db0f5a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga662d0fc587b91c6835e7f4c00db0f5a1">m2m_wifi_set_scan_options</a> (<a class="el" href="structtstr_m2_m_scan_option.html">tstrM2MScanOption</a> *ptstrM2MScanOption)</td></tr>
<tr class="memdesc:ga662d0fc587b91c6835e7f4c00db0f5a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous API for configuring the behaviour of the WINC IC's network scanning functions.  <br /></td></tr>
<tr class="separator:ga662d0fc587b91c6835e7f4c00db0f5a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9600448b77981882041ed9615828f253"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga9600448b77981882041ed9615828f253">m2m_wifi_set_scan_region</a> (<a class="el" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a> ScanRegion)</td></tr>
<tr class="memdesc:ga9600448b77981882041ed9615828f253"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous API for configuring the regulatory restrictions that may affect the WINC ICs scanning behaviour.  <br /></td></tr>
<tr class="separator:ga9600448b77981882041ed9615828f253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b92950b50cbafac657879d0513c35a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga2b92950b50cbafac657879d0513c35a6">m2m_wifi_set_stop_scan_on_first</a> (<a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8StopScanOption)</td></tr>
<tr class="memdesc:ga2b92950b50cbafac657879d0513c35a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous API for enabling/disabling the stop scan on first result of the WINC IC's network scanning functions.  <br /></td></tr>
<tr class="separator:ga2b92950b50cbafac657879d0513c35a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Here are listed all the functions that implement the Wifi Scanning APIs. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac92223273822358f4aee6e133b11815d" name="gac92223273822358f4aee6e133b11815d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac92223273822358f4aee6e133b11815d">&#9670;&#160;</a></span>m2m_wifi_get_num_ap_found()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_s_p_define.html#gaecc0323d771e41ef81a76b5f12783e22">NMI_API</a> <a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> m2m_wifi_get_num_ap_found </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the number of AP's found in the last Scan Request, The function read the number of AP's from global variable which updated in the wifi_cb in M2M_WIFI_RESP_SCAN_DONE. <br  />
 </p>
<p>Synchronous function to retrieve the number of AP's found during the last scan operation.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__m2m__wifi.html#ga499dfa24a19c2e84776aeabedf897135" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <br  />
 </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Return the number of AP's found in the last Scan Request. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>m2m_wifi_request_scan need to be called first </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>That function need to be called in the wifi_cb in M2M_WIFI_RESP_SCAN_DONE, calling that function in any other place will return undefined/undated numbers. Function used only in STA mode only.</dd></dl>
<p>The function reads the number of APs from global variable which was updated in the Wi-Fi callback function through the <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> event. Function used only in STA mode only.</p>
<dl class="section see"><dt>See also</dt><dd><br  />
 <a class="el" href="group__m2m__wifi.html#ga499dfa24a19c2e84776aeabedf897135" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> <br  />
</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>m2m_wifi_request_scan must be called first to ensure up to date results are available.<ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a>.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> must be handled in the callback to receive the requested scan information.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd><br  />
 This function must be called only in the wi-fi callback function when the events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> or <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> are received. Calling this function in any other place will result in undefined/outdated numbers.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Return the number of AP's found in the last Scan Request.</dd></dl>
<h1><a class="anchor" id="WIFIExample7"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="m2m__wifi_8h.html">m2m_wifi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="m2m__types_8h.html">m2m_types.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>    u8ScanResultIdx = 0;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code hl_struct" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">s8ScanState</a> == <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code hl_struct" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>                       u8NumFoundAPs = <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#gac92223273822358f4aee6e133b11815d">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a70c6b917a7693e2afcc8e912e10f1d96">u8index</a>,pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a34d94f696097c6c569b480fe4262a2cc">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a0b9dbf6b40e1def154c89c53a7ceb381">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a345089f7fa5a6570886c340c08cfeb2e">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a9636bd1e4481cde0a1523a97a394b185">au8SSID</a>);</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line">    </div>
<div class="line">    param.<a class="code hl_variable" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code hl_function" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_function" href="group___w_l_a_n_e_v_t_s.html#ga461a4edc057cec8c00cf124a07aa3b02">m2m_wifi_handle_events</a>(<a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup___b_s_p_define_html_ga070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="nm__bsp_8h_source.html#l00068">nm_bsp.h:64</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_d_e_f_html_ga9ef27ba27aafdd1aa3a79d3ba2c36b8f"><div class="ttname"><a href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a></div><div class="ttdeci">#define M2M_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="nm__common_8h_source.html#l00054">nm_common.h:54</a></div></div>
<div class="ttc" id="agroup___data_t_html_ga4df709a77647e870bbf1d955b8edc9a6"><div class="ttname"><a href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdoc">Range of values between 0 to 255.</div><div class="ttdef"><b>Definition:</b> <a href="nm__bsp_8h_source.html#l00093">nm_bsp.h:93</a></div></div>
<div class="ttc" id="agroup___w_l_a_n_e_v_t_s_html_ga461a4edc057cec8c00cf124a07aa3b02"><div class="ttname"><a href="group___w_l_a_n_e_v_t_s.html#ga461a4edc057cec8c00cf124a07aa3b02">m2m_wifi_handle_events</a></div><div class="ttdeci">sint8 m2m_wifi_handle_events(void *arg)</div><div class="ttdoc">Synchronous M2M event handler function.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l00540">m2m_wifi.c:540</a></div></div>
<div class="ttc" id="agroup___w_l_a_n_i_n_i_t_html_ga73c734812e844d96d860c4e93e9daf35"><div class="ttname"><a href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a></div><div class="ttdeci">sint8 m2m_wifi_init(tstrWifiInitParam *pWifiInitParam)</div><div class="ttdoc">Synchronous API to initialize the WINC driver.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l00513">m2m_wifi.c:513</a></div></div>
<div class="ttc" id="agroup___w_l_a_n_s_c_a_n_html_ga2585ee08ee8ecac67155ec99dd4d0863"><div class="ttname"><a href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a></div><div class="ttdeci">sint8 m2m_wifi_req_scan_result(uint8 index)</div><div class="ttdoc">Reads the AP information from the Scan Result list with the given index, the response received in wif...</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l01579">m2m_wifi.c:1579</a></div></div>
<div class="ttc" id="agroup___w_l_a_n_s_c_a_n_html_ga499dfa24a19c2e84776aeabedf897135"><div class="ttname"><a href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a></div><div class="ttdeci">sint8 m2m_wifi_request_scan(uint8 ch)</div><div class="ttdoc">Asynchronous API to request the WINC IC to scan for networks.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l01260">m2m_wifi.c:1260</a></div></div>
<div class="ttc" id="agroup___w_l_a_n_s_c_a_n_html_gac92223273822358f4aee6e133b11815d"><div class="ttname"><a href="group___w_l_a_n_s_c_a_n.html#gac92223273822358f4aee6e133b11815d">m2m_wifi_get_num_ap_found</a></div><div class="ttdeci">uint8 m2m_wifi_get_num_ap_found(void)</div><div class="ttdoc">Reads the number of AP's found in the last Scan Request, The function read the number of AP's from gl...</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l01599">m2m_wifi.c:1599</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637"><div class="ttname"><a href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a></div><div class="ttdeci">@ M2M_WIFI_CH_ALL</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01273">m2m_types.h:1272</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a></div><div class="ttdeci">@ M2M_WIFI_RESP_SCAN_DONE</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00909">m2m_types.h:907</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a></div><div class="ttdeci">@ M2M_WIFI_RESP_SCAN_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00915">m2m_types.h:913</a></div></div>
<div class="ttc" id="agroup__m2m__wifi_html_ga13d5fa7a0c71fd59bbf36a61923835cc"><div class="ttname"><a href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">tstrWifiInitParam::pfAppWifiCb</a></div><div class="ttdeci">tpfAppWifiCb pfAppWifiCb</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8h_source.html#l00380">m2m_wifi.h:380</a></div></div>
<div class="ttc" id="am2m__types_8h_html"><div class="ttname"><a href="m2m__types_8h.html">m2m_types.h</a></div><div class="ttdoc">WINC Application Interface Internal Types.</div></div>
<div class="ttc" id="am2m__wifi_8h_html"><div class="ttname"><a href="m2m__wifi_8h.html">m2m_wifi.h</a></div><div class="ttdoc">WINC WLAN Application Interface.</div></div>
<div class="ttc" id="amain_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">Main application function.</div><div class="ttdef"><b>Definition:</b> <a href="main_8c_source.html#l00669">main.c:669</a></div></div>
<div class="ttc" id="astructtstr_m2m_scan_done_html"><div class="ttname"><a href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a></div><div class="ttdoc">Wi-Fi Scan Result.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01942">m2m_types.h:1942</a></div></div>
<div class="ttc" id="astructtstr_m2m_scan_done_html_a1303b806dd93bfdd4b4a51ad750b023b"><div class="ttname"><a href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">tstrM2mScanDone::u8NumofCh</a></div><div class="ttdeci">uint8 u8NumofCh</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01943">m2m_types.h:1943</a></div></div>
<div class="ttc" id="astructtstr_m2m_scan_done_html_adf06f5d0db8d0fb98e7674672ee8439d"><div class="ttname"><a href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">tstrM2mScanDone::s8ScanState</a></div><div class="ttdeci">sint8 s8ScanState</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01946">m2m_types.h:1946</a></div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a></div><div class="ttdoc">Wi-Fi Scan Result.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01993">m2m_types.h:1993</a></div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a0b9dbf6b40e1def154c89c53a7ceb381"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a0b9dbf6b40e1def154c89c53a7ceb381">tstrM2mWifiscanResult::u8AuthType</a></div><div class="ttdeci">uint8 u8AuthType</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l02000">m2m_types.h:2000</a></div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a345089f7fa5a6570886c340c08cfeb2e"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a345089f7fa5a6570886c340c08cfeb2e">tstrM2mWifiscanResult::u8ch</a></div><div class="ttdeci">uint8 u8ch</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l02003">m2m_types.h:2003</a></div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a34d94f696097c6c569b480fe4262a2cc"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a34d94f696097c6c569b480fe4262a2cc">tstrM2mWifiscanResult::s8rssi</a></div><div class="ttdeci">sint8 s8rssi</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01997">m2m_types.h:1997</a></div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a70c6b917a7693e2afcc8e912e10f1d96"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a70c6b917a7693e2afcc8e912e10f1d96">tstrM2mWifiscanResult::u8index</a></div><div class="ttdeci">uint8 u8index</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01994">m2m_types.h:1994</a></div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_a9636bd1e4481cde0a1523a97a394b185"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#a9636bd1e4481cde0a1523a97a394b185">tstrM2mWifiscanResult::au8SSID</a></div><div class="ttdeci">uint8 au8SSID[M2M_MAX_SSID_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l02009">m2m_types.h:2009</a></div></div>
<div class="ttc" id="astructtstr_m2m_wifiscan_result_html_ae1d4c47f31a39e2423d5c7894022b95c"><div class="ttname"><a href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">tstrM2mWifiscanResult::au8BSSID</a></div><div class="ttdeci">uint8 au8BSSID[6]</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l02006">m2m_types.h:2006</a></div></div>
<div class="ttc" id="astructtstr_wifi_init_param_html"><div class="ttname"><a href="structtstr_wifi_init_param.html">tstrWifiInitParam</a></div><div class="ttdoc">Structure, holding the Wi-fi configuration attributes such as the wi-fi callback ,...</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8h_source.html#l00379">m2m_wifi.h:379</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="m2m__wifi_8c_source.html#l01599">1599</a> of file <a class="el" href="m2m__wifi_8c_source.html">m2m_wifi.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1600</span>{</div>
<div class="line"><span class="lineno"> 1601</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="group__winc1500__group.html#gaa88a68cf906f468b68747428aaed90e9">gu8ChNum</a>;</div>
<div class="line"><span class="lineno"> 1602</span>}</div>
<div class="ttc" id="agroup__winc1500__group_html_gaa88a68cf906f468b68747428aaed90e9"><div class="ttname"><a href="group__winc1500__group.html#gaa88a68cf906f468b68747428aaed90e9">gu8ChNum</a></div><div class="ttdeci">static volatile uint8 gu8ChNum</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l00067">m2m_wifi.c:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="m2m__wifi_8c_source.html#l00067">gu8ChNum</a>.</p>

</div>
</div>
<a id="ga2585ee08ee8ecac67155ec99dd4d0863" name="ga2585ee08ee8ecac67155ec99dd4d0863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2585ee08ee8ecac67155ec99dd4d0863">&#9670;&#160;</a></span>m2m_wifi_req_scan_result()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_s_p_define.html#gaecc0323d771e41ef81a76b5f12783e22">NMI_API</a> <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> m2m_wifi_req_scan_result </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the AP information from the Scan Result list with the given index, the response received in wifi_cb M2M_WIFI_RESP_SCAN_RESULT, the response pointer should be casted with <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> structure <br  />
 </p>
<p>Synchronous call to read the AP information from the SCAN Result list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Index for the requested result, the index range start from 0 till number of AP's found </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a>,<a class="el" href="group__m2m__wifi.html#gac92223273822358f4aee6e133b11815d" title="Reads the number of AP&#39;s found in the last Scan Request, The function read the number of AP&#39;s from gl...">m2m_wifi_get_num_ap_found</a>,<a class="el" href="group__m2m__wifi.html#ga499dfa24a19c2e84776aeabedf897135" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <br  />
 </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function shall return M2M_SUCCESS for success and a negative value otherwise </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>m2m_wifi_request_scan need to be called first, then m2m_wifi_get_num_ap_found to get the number of AP's found </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Function used only in STA mode only. the scan result updated only if scan request called, else it will be cashed in firmware for the host scan request result, which mean if large delay occur between the scan request and the scan result request, the result will not be up-to-date</dd></dl>
<p>Synchronous call to read the AP information from the SCAN Result list with the given index. This function is expected to be called when the response events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> or <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> are received in the wi-fi callback function. The response information received can be obtained through the casting to the <a class="el" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a> structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Index for the requested result, the index range start from 0 till number of AP's found.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group__m2m__wifi.html#gac92223273822358f4aee6e133b11815d" title="Reads the number of AP&#39;s found in the last Scan Request, The function read the number of AP&#39;s from gl...">m2m_wifi_get_num_ap_found</a> <a class="el" href="group__m2m__wifi.html#ga499dfa24a19c2e84776aeabedf897135" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <br  />
</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><br  />
<ul>
<li><a class="el" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a> needs to be called first, then m2m_wifi_get_num_ap_found to get the number of AP's found.</li>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb">tpfAppWifiCb</a> MUST be implemented and registered at startup. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a> function.</li>
<li>The event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> must be handled in the callback to receive the requested scan information.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd><ul>
<li>Function used in STA mode only. the scan results are updated only if the scan request is called.</li>
<li>Calling this function only without a scan request will lead to firmware errors.</li>
<li>Application code should refrain from introducing a large delay between the scan request and the scan result request, to prevent errors occurring.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="WIFIExample8"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="m2m__wifi_8h.html">m2m_wifi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="m2m__types_8h.html">m2m_types.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>    u8ScanResultIdx = 0;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code hl_struct" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">s8ScanState</a> == <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code hl_struct" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>                       u8NumFoundAPs = <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#gac92223273822358f4aee6e133b11815d">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a70c6b917a7693e2afcc8e912e10f1d96">u8index</a>,pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a34d94f696097c6c569b480fe4262a2cc">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a0b9dbf6b40e1def154c89c53a7ceb381">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a345089f7fa5a6570886c340c08cfeb2e">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a9636bd1e4481cde0a1523a97a394b185">au8SSID</a>);</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line">    </div>
<div class="line">    param.<a class="code hl_variable" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code hl_function" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_function" href="group___w_l_a_n_e_v_t_s.html#ga461a4edc057cec8c00cf124a07aa3b02">m2m_wifi_handle_events</a>(<a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="m2m__wifi_8c_source.html#l01579">1579</a> of file <a class="el" href="m2m__wifi_8c_source.html">m2m_wifi.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1580</span>{</div>
<div class="line"><span class="lineno"> 1581</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1582</span>    <a class="code hl_struct" href="structtstr_m2m_req_scan_result.html">tstrM2mReqScanResult</a> strReqScanRlt;</div>
<div class="line"><span class="lineno"> 1583</span>    strReqScanRlt.<a class="code hl_variable" href="structtstr_m2m_req_scan_result.html#a7f09d082424b29064faa67a51a633853">u8Index</a> = index;</div>
<div class="line"><span class="lineno"> 1584</span>    ret = <a class="code hl_function" href="m2m__hif_8c.html#a13ba8ad11b2ac39516ca787386d16ce0">hif_send</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966">M2M_REQ_GROUP_WIFI</a>, <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a200a79b0551b5671e3b4a5bbfeab18ed">M2M_WIFI_REQ_SCAN_RESULT</a>, (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>*) &amp;strReqScanRlt, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_m2m_req_scan_result.html">tstrM2mReqScanResult</a>), <a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0);</div>
<div class="line"><span class="lineno"> 1585</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno"> 1586</span>}</div>
<div class="ttc" id="agroup___data_t_html_gae35f10ffd0ac8dd2bc3e794da9bdfbc7"><div class="ttname"><a href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a></div><div class="ttdeci">signed char sint8</div><div class="ttdoc">Range of values between -128 to 127.</div><div class="ttdef"><b>Definition:</b> <a href="nm__bsp_8h_source.html#l00114">nm_bsp.h:114</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20a200a79b0551b5671e3b4a5bbfeab18ed"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a200a79b0551b5671e3b4a5bbfeab18ed">M2M_WIFI_REQ_SCAN_RESULT</a></div><div class="ttdeci">@ M2M_WIFI_REQ_SCAN_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00912">m2m_types.h:910</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966"><div class="ttname"><a href="group___wlan_enums.html#gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966">M2M_REQ_GROUP_WIFI</a></div><div class="ttdeci">@ M2M_REQ_GROUP_WIFI</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00815">m2m_types.h:815</a></div></div>
<div class="ttc" id="am2m__hif_8c_html_a13ba8ad11b2ac39516ca787386d16ce0"><div class="ttname"><a href="m2m__hif_8c.html#a13ba8ad11b2ac39516ca787386d16ce0">hif_send</a></div><div class="ttdeci">sint8 hif_send(uint8 u8Gid, uint8 u8Opcode, uint8 *pu8CtrlBuf, uint16 u16CtrlBufSize, uint8 *pu8DataBuf, uint16 u16DataSize, uint16 u16DataOffset)</div><div class="ttdoc">Send packet using host interface.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__hif_8c_source.html#l00293">m2m_hif.c:293</a></div></div>
<div class="ttc" id="astructtstr_m2m_req_scan_result_html"><div class="ttname"><a href="structtstr_m2m_req_scan_result.html">tstrM2mReqScanResult</a></div><div class="ttdoc">Scan Result Request.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01969">m2m_types.h:1969</a></div></div>
<div class="ttc" id="astructtstr_m2m_req_scan_result_html_a7f09d082424b29064faa67a51a633853"><div class="ttname"><a href="structtstr_m2m_req_scan_result.html#a7f09d082424b29064faa67a51a633853">tstrM2mReqScanResult::u8Index</a></div><div class="ttdeci">uint8 u8Index</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01970">m2m_types.h:1970</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="m2m__hif_8c_source.html#l00293">hif_send()</a>, <a class="el" href="m2m__types_8h_source.html#l00815">M2M_REQ_GROUP_WIFI</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="m2m__types_8h_source.html#l00910">M2M_WIFI_REQ_SCAN_RESULT</a>, <a class="el" href="nm__bsp_8h_source.html#l00064">NULL</a>, and <a class="el" href="m2m__types_8h_source.html#l01970">tstrM2mReqScanResult::u8Index</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___w_l_a_n_s_c_a_n_ga2585ee08ee8ecac67155ec99dd4d0863_cgraph.gif" border="0" usemap="#agroup___w_l_a_n_s_c_a_n_ga2585ee08ee8ecac67155ec99dd4d0863_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga499dfa24a19c2e84776aeabedf897135" name="ga499dfa24a19c2e84776aeabedf897135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga499dfa24a19c2e84776aeabedf897135">&#9670;&#160;</a></span>m2m_wifi_request_scan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_s_p_define.html#gaecc0323d771e41ef81a76b5f12783e22">NMI_API</a> <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> m2m_wifi_request_scan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asynchronous API to request the WINC IC to scan for networks. </p>
<p>Scan statuses are delivered to the application via the Wi-Fi event callback (<a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb">tpfAppWifiCb</a>) in three stages. The first step involves the event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> which, if successful, provides the number of detected networks (access points). The application must then read the list of access points via multiple calls to the asynchronous <a class="el" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a> API. For each call to this function, the application will receive (step three) the event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>RF Channel ID for SCAN operation. It should be set according to <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a>, with a value of <a class="el" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a> to scan all channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registration of the callback is done via <a class="el" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a>.</li>
<li>The events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> and <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> must be handled in the (tpfAppWifiCb) callback.</li>
<li>The <a class="el" href="group___w_l_a_n_e_v_t_s.html#ga461a4edc057cec8c00cf124a07aa3b02">m2m_wifi_handle_events</a> function MUST be called to receive the responses in the callback.</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This API is valid only for STA mode, it may be called regardless of connection state (connected or disconnected states).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> <a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb" title="Wi-Fi&#39;s main callback function handler, for handling the M2M_WIFI events received on the Wi-Fi interf...">tpfAppWifiCb</a> <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99" title="Wi-Fi RF Channels.">tenuM2mScanCh</a> <a class="el" href="group__m2m__wifi.html#ga73c734812e844d96d860c4e93e9daf35" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group__m2m__wifi.html#ga461a4edc057cec8c00cf124a07aa3b02" title="Synchronous M2M event handler function.">m2m_wifi_handle_events</a> <a class="el" href="group__m2m__wifi.html#ga2585ee08ee8ecac67155ec99dd4d0863" title="Reads the AP information from the Scan Result list with the given index, the response received in wif...">m2m_wifi_req_scan_result</a></dd></dl>
<h1><a class="anchor" id="WIFIExample6"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="m2m__wifi_8h.html">m2m_wifi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="m2m__types_8h.html">m2m_types.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>    u8ScanResultIdx = 0;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code hl_struct" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">s8ScanState</a> == <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code hl_struct" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>                       u8NumFoundAPs = <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#gac92223273822358f4aee6e133b11815d">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a70c6b917a7693e2afcc8e912e10f1d96">u8index</a>,pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a34d94f696097c6c569b480fe4262a2cc">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a0b9dbf6b40e1def154c89c53a7ceb381">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a345089f7fa5a6570886c340c08cfeb2e">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a9636bd1e4481cde0a1523a97a394b185">au8SSID</a>);</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line">    </div>
<div class="line">    param.<a class="code hl_variable" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code hl_function" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Scan all channels</span></div>
<div class="line">        <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>);</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_function" href="group___w_l_a_n_e_v_t_s.html#ga461a4edc057cec8c00cf124a07aa3b02">m2m_wifi_handle_events</a>(<a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="m2m__wifi_8c_source.html#l01260">1260</a> of file <a class="el" href="m2m__wifi_8c_source.html">m2m_wifi.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1261</span>{</div>
<div class="line"><span class="lineno"> 1262</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1263</span> </div>
<div class="line"><span class="lineno"> 1264</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="group__winc1500__group.html#ga76295f775841fc0f6533603c99da618e">gu8scanInProgress</a>)</div>
<div class="line"><span class="lineno"> 1265</span>    {</div>
<div class="line"><span class="lineno"> 1266</span>        <span class="keywordflow">if</span>(((ch &gt;= <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a1af3aecfb8fb74254076d723c1e1dd58">M2M_WIFI_CH_1</a>) &amp;&amp; (ch &lt;= <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a6421cfaf77ed29e91106d39e69e4a970">M2M_WIFI_CH_14</a>)) || (ch == <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>))</div>
<div class="line"><span class="lineno"> 1267</span>        {</div>
<div class="line"><span class="lineno"> 1268</span>            <a class="code hl_struct" href="structtstr_m2_m_scan.html">tstrM2MScan</a> strtmp;</div>
<div class="line"><span class="lineno"> 1269</span>            strtmp.<a class="code hl_variable" href="structtstr_m2_m_scan.html#a8fa9ab7f483022c49786600dea2cbf92">u8ChNum</a> = ch;</div>
<div class="line"><span class="lineno"> 1270</span>            s8Ret = <a class="code hl_function" href="m2m__hif_8c.html#a13ba8ad11b2ac39516ca787386d16ce0">hif_send</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966">M2M_REQ_GROUP_WIFI</a>, <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ae522ee49cac55f1020a7aa527f172157">M2M_WIFI_REQ_SCAN</a>, (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>*)&amp;strtmp, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_m2_m_scan.html">tstrM2MScan</a>),<a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0,0);</div>
<div class="line"><span class="lineno"> 1271</span>            <span class="keywordflow">if</span>(s8Ret == <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line"><span class="lineno"> 1272</span>            {</div>
<div class="line"><span class="lineno"> 1273</span>                <a class="code hl_variable" href="group__winc1500__group.html#ga76295f775841fc0f6533603c99da618e">gu8scanInProgress</a> = 1;</div>
<div class="line"><span class="lineno"> 1274</span>            }</div>
<div class="line"><span class="lineno"> 1275</span>        }</div>
<div class="line"><span class="lineno"> 1276</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1277</span>        {</div>
<div class="line"><span class="lineno"> 1278</span>            s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#gad7b33b775a3158ec2b1ceeb105b1a461">M2M_ERR_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno"> 1279</span>        }</div>
<div class="line"><span class="lineno"> 1280</span>    }</div>
<div class="line"><span class="lineno"> 1281</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1282</span>    {</div>
<div class="line"><span class="lineno"> 1283</span>        s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#gaf3a40ba0f62490e78d5e7bda144bf691">M2M_ERR_SCAN_IN_PROGRESS</a>;</div>
<div class="line"><span class="lineno"> 1284</span>    }</div>
<div class="line"><span class="lineno"> 1285</span>    <span class="keywordflow">return</span> s8Ret;</div>
<div class="line"><span class="lineno"> 1286</span>}</div>
<div class="ttc" id="agroup___c_o_m_m_o_n_d_e_f_html_gad7b33b775a3158ec2b1ceeb105b1a461"><div class="ttname"><a href="group___c_o_m_m_o_n_d_e_f.html#gad7b33b775a3158ec2b1ceeb105b1a461">M2M_ERR_INVALID_ARG</a></div><div class="ttdeci">#define M2M_ERR_INVALID_ARG</div><div class="ttdef"><b>Definition:</b> <a href="nm__common_8h_source.html#l00070">nm_common.h:70</a></div></div>
<div class="ttc" id="agroup___c_o_m_m_o_n_d_e_f_html_gaf3a40ba0f62490e78d5e7bda144bf691"><div class="ttname"><a href="group___c_o_m_m_o_n_d_e_f.html#gaf3a40ba0f62490e78d5e7bda144bf691">M2M_ERR_SCAN_IN_PROGRESS</a></div><div class="ttdeci">#define M2M_ERR_SCAN_IN_PROGRESS</div><div class="ttdef"><b>Definition:</b> <a href="nm__common_8h_source.html#l00068">nm_common.h:68</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga2a91dd671e2672dba1a7ed45230f3a99a1af3aecfb8fb74254076d723c1e1dd58"><div class="ttname"><a href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a1af3aecfb8fb74254076d723c1e1dd58">M2M_WIFI_CH_1</a></div><div class="ttdeci">@ M2M_WIFI_CH_1</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01258">m2m_types.h:1258</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga2a91dd671e2672dba1a7ed45230f3a99a6421cfaf77ed29e91106d39e69e4a970"><div class="ttname"><a href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a6421cfaf77ed29e91106d39e69e4a970">M2M_WIFI_CH_14</a></div><div class="ttdeci">@ M2M_WIFI_CH_14</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01271">m2m_types.h:1271</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20ae522ee49cac55f1020a7aa527f172157"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ae522ee49cac55f1020a7aa527f172157">M2M_WIFI_REQ_SCAN</a></div><div class="ttdeci">@ M2M_WIFI_REQ_SCAN</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00906">m2m_types.h:904</a></div></div>
<div class="ttc" id="agroup__winc1500__group_html_ga76295f775841fc0f6533603c99da618e"><div class="ttname"><a href="group__winc1500__group.html#ga76295f775841fc0f6533603c99da618e">gu8scanInProgress</a></div><div class="ttdeci">static volatile uint8 gu8scanInProgress</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l00070">m2m_wifi.c:70</a></div></div>
<div class="ttc" id="astructtstr_m2_m_scan_html"><div class="ttname"><a href="structtstr_m2_m_scan.html">tstrM2MScan</a></div><div class="ttdoc">Wi-Fi Scan Request.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01898">m2m_types.h:1898</a></div></div>
<div class="ttc" id="astructtstr_m2_m_scan_html_a8fa9ab7f483022c49786600dea2cbf92"><div class="ttname"><a href="structtstr_m2_m_scan.html#a8fa9ab7f483022c49786600dea2cbf92">tstrM2MScan::u8ChNum</a></div><div class="ttdeci">uint8 u8ChNum</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01899">m2m_types.h:1899</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="m2m__wifi_8c_source.html#l00070">gu8scanInProgress</a>, <a class="el" href="m2m__hif_8c_source.html#l00293">hif_send()</a>, <a class="el" href="nm__common_8h_source.html#l00070">M2M_ERR_INVALID_ARG</a>, <a class="el" href="nm__common_8h_source.html#l00068">M2M_ERR_SCAN_IN_PROGRESS</a>, <a class="el" href="m2m__types_8h_source.html#l00815">M2M_REQ_GROUP_WIFI</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="m2m__types_8h_source.html#l01258">M2M_WIFI_CH_1</a>, <a class="el" href="m2m__types_8h_source.html#l01271">M2M_WIFI_CH_14</a>, <a class="el" href="m2m__types_8h_source.html#l01272">M2M_WIFI_CH_ALL</a>, <a class="el" href="m2m__types_8h_source.html#l00904">M2M_WIFI_REQ_SCAN</a>, <a class="el" href="nm__bsp_8h_source.html#l00064">NULL</a>, and <a class="el" href="m2m__types_8h_source.html#l01899">tstrM2MScan::u8ChNum</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___w_l_a_n_s_c_a_n_ga499dfa24a19c2e84776aeabedf897135_cgraph.gif" border="0" usemap="#agroup___w_l_a_n_s_c_a_n_ga499dfa24a19c2e84776aeabedf897135_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga90de6cb6a97d4ed9e5cb602ac8c1728b" name="ga90de6cb6a97d4ed9e5cb602ac8c1728b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga90de6cb6a97d4ed9e5cb602ac8c1728b">&#9670;&#160;</a></span>m2m_wifi_request_scan_passive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_s_p_define.html#gaecc0323d771e41ef81a76b5f12783e22">NMI_API</a> <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> m2m_wifi_request_scan_passive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a>&#160;</td>
          <td class="paramname"><em>scan_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Similar to <a class="el" href="group___w_l_a_n_s_c_a_n.html#ga499dfa24a19c2e84776aeabedf897135">m2m_wifi_request_scan</a> but performs passive scanning instead of active scanning. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>RF Channel ID for SCAN operation. It should be set according to <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a>. With a value of <a class="el" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>, means to scan all channels.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">scan_time</td><td>The time in ms that passive scan is listening for beacons on each channel per one slot, enter 0 for default setting.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function is not allowed in AP mode. It works only for STA mode (both connected or disconnected states).</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a>.</li>
<li>The events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> and <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>. must be handled in the callback.</li>
<li>The <a class="el" href="group___w_l_a_n_e_v_t_s.html#ga461a4edc057cec8c00cf124a07aa3b02">m2m_wifi_handle_events</a> function MUST be called to receive the responses in the callback.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> <a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb" title="Wi-Fi&#39;s main callback function handler, for handling the M2M_WIFI events received on the Wi-Fi interf...">tpfAppWifiCb</a> <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99" title="Wi-Fi RF Channels.">tenuM2mScanCh</a> <a class="el" href="group__m2m__wifi.html#ga73c734812e844d96d860c4e93e9daf35" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group__m2m__wifi.html#ga499dfa24a19c2e84776aeabedf897135" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="group__m2m__wifi.html#ga461a4edc057cec8c00cf124a07aa3b02" title="Synchronous M2M event handler function.">m2m_wifi_handle_events</a> <a class="el" href="group__m2m__wifi.html#ga2585ee08ee8ecac67155ec99dd4d0863" title="Reads the AP information from the Scan Result list with the given index, the response received in wif...">m2m_wifi_req_scan_result</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="m2m__wifi_8c_source.html#l01288">1288</a> of file <a class="el" href="m2m__wifi_8c_source.html">m2m_wifi.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1289</span>{</div>
<div class="line"><span class="lineno"> 1290</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>;</div>
<div class="line"><span class="lineno"> 1291</span> </div>
<div class="line"><span class="lineno"> 1292</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="group__winc1500__group.html#ga76295f775841fc0f6533603c99da618e">gu8scanInProgress</a>)</div>
<div class="line"><span class="lineno"> 1293</span>    {</div>
<div class="line"><span class="lineno"> 1294</span>        <span class="keywordflow">if</span>(((ch &gt;= <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a1af3aecfb8fb74254076d723c1e1dd58">M2M_WIFI_CH_1</a>) &amp;&amp; (ch &lt;= <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a6421cfaf77ed29e91106d39e69e4a970">M2M_WIFI_CH_14</a>)) || (ch == <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>))</div>
<div class="line"><span class="lineno"> 1295</span>        {</div>
<div class="line"><span class="lineno"> 1296</span>            <a class="code hl_struct" href="structtstr_m2_m_scan.html">tstrM2MScan</a> strtmp;</div>
<div class="line"><span class="lineno"> 1297</span>            strtmp.<a class="code hl_variable" href="structtstr_m2_m_scan.html#a8fa9ab7f483022c49786600dea2cbf92">u8ChNum</a> = ch;</div>
<div class="line"><span class="lineno"> 1298</span>            </div>
<div class="line"><span class="lineno"> 1299</span>            strtmp.<a class="code hl_variable" href="structtstr_m2_m_scan.html#a67948924bebee11eaa6d03ed3f060aee">u16PassiveScanTime</a> = scan_time;</div>
<div class="line"><span class="lineno"> 1300</span>            </div>
<div class="line"><span class="lineno"> 1301</span>            s8Ret = <a class="code hl_function" href="m2m__hif_8c.html#a13ba8ad11b2ac39516ca787386d16ce0">hif_send</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966">M2M_REQ_GROUP_WIFI</a>, <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4c90d5c847874f1aa412e9e21babf093">M2M_WIFI_REQ_PASSIVE_SCAN</a>, (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>*)&amp;strtmp, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_m2_m_scan.html">tstrM2MScan</a>),<a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0,0);</div>
<div class="line"><span class="lineno"> 1302</span>            <span class="keywordflow">if</span>(s8Ret == <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line"><span class="lineno"> 1303</span>            {</div>
<div class="line"><span class="lineno"> 1304</span>                <a class="code hl_variable" href="group__winc1500__group.html#ga76295f775841fc0f6533603c99da618e">gu8scanInProgress</a> = 1;</div>
<div class="line"><span class="lineno"> 1305</span>            }</div>
<div class="line"><span class="lineno"> 1306</span>        }</div>
<div class="line"><span class="lineno"> 1307</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1308</span>        {</div>
<div class="line"><span class="lineno"> 1309</span>            s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#gad7b33b775a3158ec2b1ceeb105b1a461">M2M_ERR_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno"> 1310</span>        }</div>
<div class="line"><span class="lineno"> 1311</span>    }</div>
<div class="line"><span class="lineno"> 1312</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1313</span>    {</div>
<div class="line"><span class="lineno"> 1314</span>        s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#gaf3a40ba0f62490e78d5e7bda144bf691">M2M_ERR_SCAN_IN_PROGRESS</a>;</div>
<div class="line"><span class="lineno"> 1315</span>    }</div>
<div class="line"><span class="lineno"> 1316</span>    <span class="keywordflow">return</span> s8Ret;</div>
<div class="line"><span class="lineno"> 1317</span>}</div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20a4c90d5c847874f1aa412e9e21babf093"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4c90d5c847874f1aa412e9e21babf093">M2M_WIFI_REQ_PASSIVE_SCAN</a></div><div class="ttdeci">@ M2M_WIFI_REQ_PASSIVE_SCAN</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00965">m2m_types.h:963</a></div></div>
<div class="ttc" id="astructtstr_m2_m_scan_html_a67948924bebee11eaa6d03ed3f060aee"><div class="ttname"><a href="structtstr_m2_m_scan.html#a67948924bebee11eaa6d03ed3f060aee">tstrM2MScan::u16PassiveScanTime</a></div><div class="ttdeci">uint16 u16PassiveScanTime</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01905">m2m_types.h:1905</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="m2m__wifi_8c_source.html#l00070">gu8scanInProgress</a>, <a class="el" href="m2m__hif_8c_source.html#l00293">hif_send()</a>, <a class="el" href="nm__common_8h_source.html#l00070">M2M_ERR_INVALID_ARG</a>, <a class="el" href="nm__common_8h_source.html#l00068">M2M_ERR_SCAN_IN_PROGRESS</a>, <a class="el" href="m2m__types_8h_source.html#l00815">M2M_REQ_GROUP_WIFI</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="m2m__types_8h_source.html#l01258">M2M_WIFI_CH_1</a>, <a class="el" href="m2m__types_8h_source.html#l01271">M2M_WIFI_CH_14</a>, <a class="el" href="m2m__types_8h_source.html#l01272">M2M_WIFI_CH_ALL</a>, <a class="el" href="m2m__types_8h_source.html#l00963">M2M_WIFI_REQ_PASSIVE_SCAN</a>, <a class="el" href="nm__bsp_8h_source.html#l00064">NULL</a>, <a class="el" href="m2m__types_8h_source.html#l01905">tstrM2MScan::u16PassiveScanTime</a>, and <a class="el" href="m2m__types_8h_source.html#l01899">tstrM2MScan::u8ChNum</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___w_l_a_n_s_c_a_n_ga90de6cb6a97d4ed9e5cb602ac8c1728b_cgraph.gif" border="0" usemap="#agroup___w_l_a_n_s_c_a_n_ga90de6cb6a97d4ed9e5cb602ac8c1728b_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga75bf26a8550eb98553ade6a81823ad87" name="ga75bf26a8550eb98553ade6a81823ad87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga75bf26a8550eb98553ade6a81823ad87">&#9670;&#160;</a></span>m2m_wifi_request_scan_ssid_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___b_s_p_define.html#gaecc0323d771e41ef81a76b5f12783e22">NMI_API</a> <a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> m2m_wifi_request_scan_ssid_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *&#160;</td>
          <td class="paramname"><em>u8SsidList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asynchronous wi-fi scan request on the given channel and the hidden scan list. </p>
<p>The scan status is delivered in the wi-fi event callback and then the application is to read the scan results sequentially. The number of APs found (N) is returned in event <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> with the number of found APs. The application could read the list of APs by calling the function <a class="el" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a> N times.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>RF Channel ID for SCAN operation. It should be set according to <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99">tenuM2mScanCh</a>. With a value of <a class="el" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>, means to scan all channels.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">u8SsidList</td><td>u8SsidList is a buffer containing a list of hidden SSIDs to include during the scan. The first byte in the buffer, u8SsidList[0], is the number of SSIDs encoded in the string. The number of hidden SSIDs cannot exceed <a class="el" href="group___wlan_defines.html#gaeace85ae13a66b042b2b3d044460138d">MAX_HIDDEN_SITES</a>. All SSIDs are concatenated in the following bytes and each SSID is prefixed with a one-byte header containing its length. <br  />
 The total number of bytes in u8SsidList buffer, including length byte, cannot exceed 133 bytes (MAX_HIDDEN_SITES SSIDs x 32 bytes each, which is max SSID length). For instance, encoding the two hidden SSIDs "DEMO_AP" and "TEST" results in the following buffer content:</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8SsidList[14];</div>
<div class="line">u8SsidList[0] = 2; <span class="comment">// Number of SSIDs is 2</span></div>
<div class="line">u8SsidList[1] = 7; <span class="comment">// Length of the string &quot;DEMO_AP&quot; without NULL termination</span></div>
<div class="line">memcpy(&amp;u8SsidList[2], <span class="stringliteral">&quot;DEMO_AP&quot;</span>, 7);  <span class="comment">// Bytes index 2-9 containing the string DEMO_AP</span></div>
<div class="line">u8SsidList[9] = 4; <span class="comment">// Length of the string &quot;TEST&quot; without NULL termination</span></div>
<div class="line">memcpy(&amp;u8SsidList[10], <span class="stringliteral">&quot;TEST&quot;</span>, 4);  <span class="comment">// Bytes index 10-13 containing the string TEST</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>It works with STA/AP mode (connected or disconnected).</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><ul>
<li>A Wi-Fi notification callback of type <a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb">tpfAppWifiCb</a> MUST be implemented and registered at initialization. Registering the callback is done through passing it to the <a class="el" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a>.</li>
<li>The events <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> and <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>. must be handled in the callback.</li>
<li>The <a class="el" href="group___w_l_a_n_e_v_t_s.html#ga461a4edc057cec8c00cf124a07aa3b02">m2m_wifi_handle_events</a> function MUST be called to receive the responses in the callback.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a> <a class="el" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a> <a class="el" href="group___w_l_a_n_callbacks.html#gaff58ffb68d8c4126b61fa842005e0abb" title="Wi-Fi&#39;s main callback function handler, for handling the M2M_WIFI events received on the Wi-Fi interf...">tpfAppWifiCb</a> <a class="el" href="structtstr_m2m_wifiscan_result.html" title="Wi-Fi Scan Result.">tstrM2mWifiscanResult</a> <a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99" title="Wi-Fi RF Channels.">tenuM2mScanCh</a> <a class="el" href="group__m2m__wifi.html#ga73c734812e844d96d860c4e93e9daf35" title="Synchronous API to initialize the WINC driver.">m2m_wifi_init</a> <a class="el" href="group__m2m__wifi.html#ga461a4edc057cec8c00cf124a07aa3b02" title="Synchronous M2M event handler function.">m2m_wifi_handle_events</a> <a class="el" href="group__m2m__wifi.html#ga2585ee08ee8ecac67155ec99dd4d0863" title="Reads the AP information from the Scan Result list with the given index, the response received in wif...">m2m_wifi_req_scan_result</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> for successful operations and a negative value otherwise.</dd></dl>
<h1><a class="anchor" id="WIFIExample6b"></a>
Example</h1>
<p>The code snippet demonstrates an example of how the scan request is called from the application's main function and the handling of the events received in response. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="m2m__wifi_8h.html">m2m_wifi.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="m2m__types_8h.html">m2m_types.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> request_scan_hidden_demo_ap(<span class="keywordtype">void</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> wifi_event_cb(<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8WiFiEvent, <span class="keywordtype">void</span> * pvMsg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>    u8ScanResultIdx = 0;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span>(u8WiFiEvent)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ad835febbe18b7e3cc6ce4693951354fe">M2M_WIFI_RESP_SCAN_DONE</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a> *pstrInfo = (<a class="code hl_struct" href="structtstr_m2m_scan_done.html">tstrM2mScanDone</a>*)pvMsg;</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;Num of AP found %d\n&quot;</span>,pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">u8NumofCh</a>);</div>
<div class="line">            <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">s8ScanState</a> == <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line">            {</div>
<div class="line">                u8ScanResultIdx = 0;</div>
<div class="line">                <span class="keywordflow">if</span>(pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#a1303b806dd93bfdd4b4a51ad750b023b">u8NumofCh</a> &gt;= 1)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a>(u8ScanResultIdx);</div>
<div class="line">                    u8ScanResultIdx ++;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;No AP Found Rescan\n&quot;</span>);</div>
<div class="line">                    request_scan_hidden_demo_ap();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;(ERR) Scan fail with error &lt;%d&gt;\n&quot;</span>,pstrInfo-&gt;<a class="code hl_variable" href="structtstr_m2m_scan_done.html#adf06f5d0db8d0fb98e7674672ee8439d">s8ScanState</a>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20adfb48e88c3a8e5f9dac634d62d3f53e5">M2M_WIFI_RESP_SCAN_RESULT</a>:</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_struct" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>       *pstrScanResult =(<a class="code hl_struct" href="structtstr_m2m_wifiscan_result.html">tstrM2mWifiscanResult</a>*)pvMsg;</div>
<div class="line">            <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>                       u8NumFoundAPs = <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#gac92223273822358f4aee6e133b11815d">m2m_wifi_get_num_ap_found</a>();</div>
<div class="line">            </div>
<div class="line">            printf(<span class="stringliteral">&quot;&gt;&gt;%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\n&quot;</span>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a70c6b917a7693e2afcc8e912e10f1d96">u8index</a>,pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a34d94f696097c6c569b480fe4262a2cc">s8rssi</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a0b9dbf6b40e1def154c89c53a7ceb381">u8AuthType</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a345089f7fa5a6570886c340c08cfeb2e">u8ch</a>,</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[0], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[1], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[2],</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[3], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[4], pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#ae1d4c47f31a39e2423d5c7894022b95c">au8BSSID</a>[5],</div>
<div class="line">                pstrScanResult-&gt;<a class="code hl_variable" href="structtstr_m2m_wifiscan_result.html#a9636bd1e4481cde0a1523a97a394b185">au8SSID</a>);</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span>(u8ScanResultIdx &lt; u8NumFoundAPs)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Read the next scan result</span></div>
<div class="line">                <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga2585ee08ee8ecac67155ec99dd4d0863">m2m_wifi_req_scan_result</a>(index);</div>
<div class="line">                u8ScanResultIdx ++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> request_scan_hidden_demo_ap(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> list[9];</div>
<div class="line">    <span class="keywordtype">char</span> ssid[] = <span class="stringliteral">&quot;DEMO_AP&quot;</span>;</div>
<div class="line">    <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> len = (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>)(<span class="keyword">sizeof</span>(ssid)-1);</div>
<div class="line"> </div>
<div class="line">    list[0] = 1;</div>
<div class="line">    list[1] = len;</div>
<div class="line">    memcpy(&amp;list[2], ssid, len); <span class="comment">// copy 7 bytes</span></div>
<div class="line">    <span class="comment">// Scan all channels</span></div>
<div class="line">    <a class="code hl_function" href="group___w_l_a_n_s_c_a_n.html#ga75bf26a8550eb98553ade6a81823ad87">m2m_wifi_request_scan_ssid_list</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>, list);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>()</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="structtstr_wifi_init_param.html">tstrWifiInitParam</a>   param;</div>
<div class="line">    </div>
<div class="line">    param.<a class="code hl_variable" href="group__m2m__wifi.html#ga13d5fa7a0c71fd59bbf36a61923835cc">pfAppWifiCb</a>   = wifi_event_cb;</div>
<div class="line">    <span class="keywordflow">if</span>(!<a class="code hl_function" href="group___w_l_a_n_i_n_i_t.html#ga73c734812e844d96d860c4e93e9daf35">m2m_wifi_init</a>(&amp;param))</div>
<div class="line">    {</div>
<div class="line">        request_scan_hidden_demo_ap();</div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_function" href="group___w_l_a_n_e_v_t_s.html#ga461a4edc057cec8c00cf124a07aa3b02">m2m_wifi_handle_events</a>(<a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="agroup___w_l_a_n_s_c_a_n_html_ga75bf26a8550eb98553ade6a81823ad87"><div class="ttname"><a href="group___w_l_a_n_s_c_a_n.html#ga75bf26a8550eb98553ade6a81823ad87">m2m_wifi_request_scan_ssid_list</a></div><div class="ttdeci">sint8 m2m_wifi_request_scan_ssid_list(uint8 ch, uint8 *u8Ssidlist)</div><div class="ttdoc">Asynchronous wi-fi scan request on the given channel and the hidden scan list.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l01319">m2m_wifi.c:1319</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="m2m__wifi_8c_source.html#l01319">1319</a> of file <a class="el" href="m2m__wifi_8c_source.html">m2m_wifi.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1320</span>{</div>
<div class="line"><span class="lineno"> 1321</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#gad7b33b775a3158ec2b1ceeb105b1a461">M2M_ERR_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno"> 1322</span> </div>
<div class="line"><span class="lineno"> 1323</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="group__winc1500__group.html#ga76295f775841fc0f6533603c99da618e">gu8scanInProgress</a>)</div>
<div class="line"><span class="lineno"> 1324</span>    {</div>
<div class="line"><span class="lineno"> 1325</span>        <span class="keywordflow">if</span>((((ch &gt;= <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a1af3aecfb8fb74254076d723c1e1dd58">M2M_WIFI_CH_1</a>) &amp;&amp; (ch &lt;= <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a6421cfaf77ed29e91106d39e69e4a970">M2M_WIFI_CH_14</a>)) || (ch == <a class="code hl_enumvalue" href="group___wlan_enums.html#gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637">M2M_WIFI_CH_ALL</a>))&amp;&amp;(u8Ssidlist != <a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><span class="lineno"> 1326</span>        {</div>
<div class="line"><span class="lineno"> 1327</span>            <a class="code hl_struct" href="structtstr_m2_m_scan.html">tstrM2MScan</a> strtmp;</div>
<div class="line"><span class="lineno"> 1328</span>            <a class="code hl_typedef" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a> u16Lsize = 0;</div>
<div class="line"><span class="lineno"> 1329</span>            <a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> u8Apnum = u8Ssidlist[u16Lsize];</div>
<div class="line"><span class="lineno"> 1330</span>            <span class="keywordflow">if</span>(u8Apnum &lt;= <a class="code hl_define" href="group___wlan_defines.html#gaeace85ae13a66b042b2b3d044460138d">MAX_HIDDEN_SITES</a>)</div>
<div class="line"><span class="lineno"> 1331</span>            {</div>
<div class="line"><span class="lineno"> 1332</span>                u16Lsize++;</div>
<div class="line"><span class="lineno"> 1333</span>                <span class="keywordflow">while</span>(u8Apnum)</div>
<div class="line"><span class="lineno"> 1334</span>                {</div>
<div class="line"><span class="lineno"> 1335</span>                    <span class="keywordflow">if</span>(u8Ssidlist[u16Lsize] &gt;= <a class="code hl_define" href="group___wlan_defines.html#gab2bd95c18ede2fbc07b44c5660cc0097">M2M_MAX_SSID_LEN</a>){ </div>
<div class="line"><span class="lineno"> 1336</span>                        <span class="keywordflow">goto</span> EXIT;</div>
<div class="line"><span class="lineno"> 1337</span>                    }<span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1338</span>                        u16Lsize += u8Ssidlist[u16Lsize] + 1;</div>
<div class="line"><span class="lineno"> 1339</span>                        u8Apnum--;</div>
<div class="line"><span class="lineno"> 1340</span>                    }</div>
<div class="line"><span class="lineno"> 1341</span>                }</div>
<div class="line"><span class="lineno"> 1342</span>                strtmp.<a class="code hl_variable" href="structtstr_m2_m_scan.html#a8fa9ab7f483022c49786600dea2cbf92">u8ChNum</a> = ch;</div>
<div class="line"><span class="lineno"> 1343</span>                s8Ret = <a class="code hl_function" href="m2m__hif_8c.html#a13ba8ad11b2ac39516ca787386d16ce0">hif_send</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966">M2M_REQ_GROUP_WIFI</a>, <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4a8403faecfb8dd61cecca3517130e26">M2M_WIFI_REQ_SCAN_SSID_LIST</a>|<a class="code hl_enumvalue" href="group___wlan_enums.html#gga692b42dca76922a269ddad2635854abda4ba55ee3c10f0b8175bba12f4b39a499">M2M_REQ_DATA_PKT</a>, (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>*)&amp;strtmp, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_m2_m_scan.html">tstrM2MScan</a>),u8Ssidlist, u16Lsize,<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_m2_m_scan.html">tstrM2MScan</a>));</div>
<div class="line"><span class="lineno"> 1344</span>                <span class="keywordflow">if</span>(s8Ret == <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line"><span class="lineno"> 1345</span>                {</div>
<div class="line"><span class="lineno"> 1346</span>                    <a class="code hl_variable" href="group__winc1500__group.html#ga76295f775841fc0f6533603c99da618e">gu8scanInProgress</a> = 1;</div>
<div class="line"><span class="lineno"> 1347</span>                }</div>
<div class="line"><span class="lineno"> 1348</span>            }</div>
<div class="line"><span class="lineno"> 1349</span>        }</div>
<div class="line"><span class="lineno"> 1350</span>    }</div>
<div class="line"><span class="lineno"> 1351</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1352</span>    {</div>
<div class="line"><span class="lineno"> 1353</span>        s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#gaf3a40ba0f62490e78d5e7bda144bf691">M2M_ERR_SCAN_IN_PROGRESS</a>;</div>
<div class="line"><span class="lineno"> 1354</span>    }</div>
<div class="line"><span class="lineno"> 1355</span>EXIT:</div>
<div class="line"><span class="lineno"> 1356</span>    <span class="keywordflow">return</span> s8Ret;</div>
<div class="line"><span class="lineno"> 1357</span>}</div>
<div class="ttc" id="agroup___data_t_html_ga1daa745171fc6e31d942c161422a76f9"><div class="ttname"><a href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a></div><div class="ttdeci">unsigned short uint16</div><div class="ttdoc">Range of values between 0 to 65535.</div><div class="ttdef"><b>Definition:</b> <a href="nm__bsp_8h_source.html#l00100">nm_bsp.h:100</a></div></div>
<div class="ttc" id="agroup___wlan_defines_html_gab2bd95c18ede2fbc07b44c5660cc0097"><div class="ttname"><a href="group___wlan_defines.html#gab2bd95c18ede2fbc07b44c5660cc0097">M2M_MAX_SSID_LEN</a></div><div class="ttdeci">#define M2M_MAX_SSID_LEN</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00199">m2m_types.h:196</a></div></div>
<div class="ttc" id="agroup___wlan_defines_html_gaeace85ae13a66b042b2b3d044460138d"><div class="ttname"><a href="group___wlan_defines.html#gaeace85ae13a66b042b2b3d044460138d">MAX_HIDDEN_SITES</a></div><div class="ttdeci">#define MAX_HIDDEN_SITES</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00230">m2m_types.h:227</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20a4a8403faecfb8dd61cecca3517130e26"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a4a8403faecfb8dd61cecca3517130e26">M2M_WIFI_REQ_SCAN_SSID_LIST</a></div><div class="ttdeci">@ M2M_WIFI_REQ_SCAN_SSID_LIST</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00959">m2m_types.h:957</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga692b42dca76922a269ddad2635854abda4ba55ee3c10f0b8175bba12f4b39a499"><div class="ttname"><a href="group___wlan_enums.html#gga692b42dca76922a269ddad2635854abda4ba55ee3c10f0b8175bba12f4b39a499">M2M_REQ_DATA_PKT</a></div><div class="ttdeci">@ M2M_REQ_DATA_PKT</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00834">m2m_types.h:833</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="m2m__wifi_8c_source.html#l00070">gu8scanInProgress</a>, <a class="el" href="m2m__hif_8c_source.html#l00293">hif_send()</a>, <a class="el" href="nm__common_8h_source.html#l00070">M2M_ERR_INVALID_ARG</a>, <a class="el" href="nm__common_8h_source.html#l00068">M2M_ERR_SCAN_IN_PROGRESS</a>, <a class="el" href="m2m__types_8h_source.html#l00196">M2M_MAX_SSID_LEN</a>, <a class="el" href="m2m__types_8h_source.html#l00833">M2M_REQ_DATA_PKT</a>, <a class="el" href="m2m__types_8h_source.html#l00815">M2M_REQ_GROUP_WIFI</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="m2m__types_8h_source.html#l01258">M2M_WIFI_CH_1</a>, <a class="el" href="m2m__types_8h_source.html#l01271">M2M_WIFI_CH_14</a>, <a class="el" href="m2m__types_8h_source.html#l01272">M2M_WIFI_CH_ALL</a>, <a class="el" href="m2m__types_8h_source.html#l00957">M2M_WIFI_REQ_SCAN_SSID_LIST</a>, <a class="el" href="m2m__types_8h_source.html#l00227">MAX_HIDDEN_SITES</a>, <a class="el" href="nm__bsp_8h_source.html#l00064">NULL</a>, and <a class="el" href="m2m__types_8h_source.html#l01899">tstrM2MScan::u8ChNum</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___w_l_a_n_s_c_a_n_ga75bf26a8550eb98553ade6a81823ad87_cgraph.gif" border="0" usemap="#agroup___w_l_a_n_s_c_a_n_ga75bf26a8550eb98553ade6a81823ad87_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga662d0fc587b91c6835e7f4c00db0f5a1" name="ga662d0fc587b91c6835e7f4c00db0f5a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga662d0fc587b91c6835e7f4c00db0f5a1">&#9670;&#160;</a></span>m2m_wifi_set_scan_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> m2m_wifi_set_scan_options </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtstr_m2_m_scan_option.html">tstrM2MScanOption</a> *&#160;</td>
          <td class="paramname"><em>ptstrM2MScanOption</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronous API for configuring the behaviour of the WINC IC's network scanning functions. </p>
<p>This function sets the configuration parameters for the scan operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptstrM2MScanOption;</td><td>Pointer to the structure holding the Scan Parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99" title="Wi-Fi RF Channels.">tenuM2mScanCh</a> <a class="el" href="group__m2m__wifi.html#ga499dfa24a19c2e84776aeabedf897135" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="structtstr_m2_m_scan_option.html" title="This struct contains the configuration options for Wi-Fi scan.">tstrM2MScanOption</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="m2m__wifi_8c_source.html#l01220">1220</a> of file <a class="el" href="m2m__wifi_8c_source.html">m2m_wifi.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1221</span>{</div>
<div class="line"><span class="lineno"> 1222</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>;</div>
<div class="line"><span class="lineno"> 1223</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="group__winc1500__group.html#ga110518d2b6637aebff2b26d4a27f9675">m2m_validate_scan_options</a> (ptstrM2MScanOption) == <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a>)</div>
<div class="line"><span class="lineno"> 1224</span>    {</div>
<div class="line"><span class="lineno"> 1225</span>        s8Ret =  <a class="code hl_function" href="m2m__hif_8c.html#a13ba8ad11b2ac39516ca787386d16ce0">hif_send</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966">M2M_REQ_GROUP_WIFI</a>, <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a95e9a50ab14cddc8421dc02928027892">M2M_WIFI_REQ_SET_SCAN_OPTION</a>, (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>*)ptstrM2MScanOption, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_m2_m_scan_option.html">tstrM2MScanOption</a>),<a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0,0);</div>
<div class="line"><span class="lineno"> 1226</span>    }</div>
<div class="line"><span class="lineno"> 1227</span>    <span class="keywordflow">return</span> s8Ret;</div>
<div class="line"><span class="lineno"> 1228</span>}</div>
<div class="ttc" id="agroup___c_o_m_m_o_n_d_e_f_html_ga39ed05df730834f2255971ca9879996e"><div class="ttname"><a href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a></div><div class="ttdeci">#define M2M_ERR_FAIL</div><div class="ttdef"><b>Definition:</b> <a href="nm__common_8h_source.html#l00066">nm_common.h:66</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20a95e9a50ab14cddc8421dc02928027892"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20a95e9a50ab14cddc8421dc02928027892">M2M_WIFI_REQ_SET_SCAN_OPTION</a></div><div class="ttdeci">@ M2M_WIFI_REQ_SET_SCAN_OPTION</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00918">m2m_types.h:916</a></div></div>
<div class="ttc" id="agroup__winc1500__group_html_ga110518d2b6637aebff2b26d4a27f9675"><div class="ttname"><a href="group__winc1500__group.html#ga110518d2b6637aebff2b26d4a27f9675">m2m_validate_scan_options</a></div><div class="ttdeci">static sint8 m2m_validate_scan_options(tstrM2MScanOption *ptstrM2MScanOption)</div><div class="ttdef"><b>Definition:</b> <a href="m2m__wifi_8c_source.html#l00394">m2m_wifi.c:394</a></div></div>
<div class="ttc" id="astructtstr_m2_m_scan_option_html"><div class="ttname"><a href="structtstr_m2_m_scan_option.html">tstrM2MScanOption</a></div><div class="ttdoc">This struct contains the configuration options for Wi-Fi scan.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01793">m2m_types.h:1793</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="m2m__hif_8c_source.html#l00293">hif_send()</a>, <a class="el" href="nm__common_8h_source.html#l00066">M2M_ERR_FAIL</a>, <a class="el" href="m2m__types_8h_source.html#l00815">M2M_REQ_GROUP_WIFI</a>, <a class="el" href="nm__common_8h_source.html#l00054">M2M_SUCCESS</a>, <a class="el" href="m2m__wifi_8c_source.html#l00394">m2m_validate_scan_options()</a>, <a class="el" href="m2m__types_8h_source.html#l00916">M2M_WIFI_REQ_SET_SCAN_OPTION</a>, and <a class="el" href="nm__bsp_8h_source.html#l00064">NULL</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___w_l_a_n_s_c_a_n_ga662d0fc587b91c6835e7f4c00db0f5a1_cgraph.gif" border="0" usemap="#agroup___w_l_a_n_s_c_a_n_ga662d0fc587b91c6835e7f4c00db0f5a1_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga9600448b77981882041ed9615828f253" name="ga9600448b77981882041ed9615828f253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9600448b77981882041ed9615828f253">&#9670;&#160;</a></span>m2m_wifi_set_scan_region()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> m2m_wifi_set_scan_region </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga1daa745171fc6e31d942c161422a76f9">uint16</a>&#160;</td>
          <td class="paramname"><em>ScanRegion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronous API for configuring the regulatory restrictions that may affect the WINC ICs scanning behaviour. </p>
<p>This function sets a property called the scan region, a parameter that affects the range of channels that the WINC IC may legally scan given a geographic region.</p>
<p>For 2.4GHz, supported in the current release, the requested scan region can't exceed the maximum number of channels (14).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ScanRegion</td><td>ASIA NORTH_AMERICA</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99" title="Wi-Fi RF Channels.">tenuM2mScanCh</a> <a class="el" href="group__m2m__wifi.html#ga499dfa24a19c2e84776aeabedf897135" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="m2m__wifi_8c_source.html#l01252">1252</a> of file <a class="el" href="m2m__wifi_8c_source.html">m2m_wifi.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1253</span>{</div>
<div class="line"><span class="lineno"> 1254</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>;</div>
<div class="line"><span class="lineno"> 1255</span>    <a class="code hl_struct" href="structtstr_m2_m_scan_region.html">tstrM2MScanRegion</a> strScanRegion;</div>
<div class="line"><span class="lineno"> 1256</span>    strScanRegion.<a class="code hl_variable" href="structtstr_m2_m_scan_region.html#ad45ea3fb3c75ff27b205b811b5a1da97">u16ScanRegion</a> = ScanRegion;</div>
<div class="line"><span class="lineno"> 1257</span>    s8Ret = <a class="code hl_function" href="m2m__hif_8c.html#a13ba8ad11b2ac39516ca787386d16ce0">hif_send</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966">M2M_REQ_GROUP_WIFI</a>, <a class="code hl_enumvalue" href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ab10eb46bba8f7314383ad0e642faa4ce">M2M_WIFI_REQ_SET_SCAN_REGION</a>, (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>*)&amp;strScanRegion, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_m2_m_scan_region.html">tstrM2MScanRegion</a>),<a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0,0);</div>
<div class="line"><span class="lineno"> 1258</span>    <span class="keywordflow">return</span> s8Ret;</div>
<div class="line"><span class="lineno"> 1259</span>}</div>
<div class="ttc" id="agroup___wlan_enums_html_gga57466b36df595c593e7ccc9892e14b20ab10eb46bba8f7314383ad0e642faa4ce"><div class="ttname"><a href="group___wlan_enums.html#gga57466b36df595c593e7ccc9892e14b20ab10eb46bba8f7314383ad0e642faa4ce">M2M_WIFI_REQ_SET_SCAN_REGION</a></div><div class="ttdeci">@ M2M_WIFI_REQ_SET_SCAN_REGION</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l00921">m2m_types.h:919</a></div></div>
<div class="ttc" id="astructtstr_m2_m_scan_region_html"><div class="ttname"><a href="structtstr_m2_m_scan_region.html">tstrM2MScanRegion</a></div><div class="ttdoc">Wi-Fi channel regulation region information.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01872">m2m_types.h:1872</a></div></div>
<div class="ttc" id="astructtstr_m2_m_scan_region_html_ad45ea3fb3c75ff27b205b811b5a1da97"><div class="ttname"><a href="structtstr_m2_m_scan_region.html#ad45ea3fb3c75ff27b205b811b5a1da97">tstrM2MScanRegion::u16ScanRegion</a></div><div class="ttdeci">uint16 u16ScanRegion</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01873">m2m_types.h:1873</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="m2m__hif_8c_source.html#l00293">hif_send()</a>, <a class="el" href="nm__common_8h_source.html#l00066">M2M_ERR_FAIL</a>, <a class="el" href="m2m__types_8h_source.html#l00815">M2M_REQ_GROUP_WIFI</a>, <a class="el" href="m2m__types_8h_source.html#l00919">M2M_WIFI_REQ_SET_SCAN_REGION</a>, <a class="el" href="nm__bsp_8h_source.html#l00064">NULL</a>, and <a class="el" href="m2m__types_8h_source.html#l01873">tstrM2MScanRegion::u16ScanRegion</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___w_l_a_n_s_c_a_n_ga9600448b77981882041ed9615828f253_cgraph.gif" border="0" usemap="#agroup___w_l_a_n_s_c_a_n_ga9600448b77981882041ed9615828f253_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga2b92950b50cbafac657879d0513c35a6" name="ga2b92950b50cbafac657879d0513c35a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b92950b50cbafac657879d0513c35a6">&#9670;&#160;</a></span>m2m_wifi_set_stop_scan_on_first()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a> m2m_wifi_set_stop_scan_on_first </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a>&#160;</td>
          <td class="paramname"><em>u8StopScanOption</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronous API for enabling/disabling the stop scan on first result of the WINC IC's network scanning functions. </p>
<p>Allows for enabling/disabling of stop scan on first result. When enabled, the WINC will stop the scan as soon as it detects a network and return the results to the host. Setting is persistent and will need to be explicitly reverted back by the application if it no longer wishes for it to be enabled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u8StopScanOption;</td><td>Setting for enabling or disabling Stopping Scan on first result. 1 = Enabled, 0 = Disabled (Default)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <a class="el" href="group___c_o_m_m_o_n_d_e_f.html#ga9ef27ba27aafdd1aa3a79d3ba2c36b8f">M2M_SUCCESS</a> if the command has been successfully queued to the WINC and a negative value otherwise.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group___wlan_enums.html#ga2a91dd671e2672dba1a7ed45230f3a99" title="Wi-Fi RF Channels.">tenuM2mScanCh</a> <a class="el" href="structtstr_m2_m_scan_option.html" title="This struct contains the configuration options for Wi-Fi scan.">tstrM2MScanOption</a> <a class="el" href="structtstr_m2_m_stop_scan_option.html" title="This struct holds additional configuration options for Wi-Fi scan.">tstrM2MStopScanOption</a> <a class="el" href="group__m2m__wifi.html#ga499dfa24a19c2e84776aeabedf897135" title="Asynchronous API to request the WINC IC to scan for networks.">m2m_wifi_request_scan</a> <a class="el" href="group__m2m__wifi.html#ga2c951aa89177975aae88231bb965fada" title="Synchronous API for configuring the behaviour of the WINC IC&#39;s network scanning functions.">m2m_wifi_set_scan_options</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="m2m__wifi_8c_source.html#l01230">1230</a> of file <a class="el" href="m2m__wifi_8c_source.html">m2m_wifi.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1231</span>{</div>
<div class="line"><span class="lineno"> 1232</span>    <a class="code hl_typedef" href="group___data_t.html#gae35f10ffd0ac8dd2bc3e794da9bdfbc7">sint8</a>   s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#ga39ed05df730834f2255971ca9879996e">M2M_ERR_FAIL</a>;</div>
<div class="line"><span class="lineno"> 1233</span> </div>
<div class="line"><span class="lineno"> 1234</span>    <a class="code hl_struct" href="structtstr_m2_m_stop_scan_option.html">tstrM2MStopScanOption</a> StopScanOption = { 0 };</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>    <span class="keywordflow">if</span>(1 &gt;= u8StopScanOption)</div>
<div class="line"><span class="lineno"> 1237</span>    {</div>
<div class="line"><span class="lineno"> 1238</span>        StopScanOption.<a class="code hl_variable" href="structtstr_m2_m_stop_scan_option.html#abb8738f8c93bb4793d93a283b04bb7c6">u8StopOnFirstResult</a> = u8StopScanOption;</div>
<div class="line"><span class="lineno"> 1239</span> </div>
<div class="line"><span class="lineno"> 1240</span>        s8Ret = <a class="code hl_function" href="m2m__hif_8c.html#a13ba8ad11b2ac39516ca787386d16ce0">hif_send</a>(<a class="code hl_enumvalue" href="group___wlan_enums.html#gga7ad36daa778abaf8d338f19f97ffeec6a099c9ef1660077850adc6604de8c8966">M2M_REQ_GROUP_WIFI</a>, <a class="code hl_enumvalue" href="group___wlan_enums.html#ggaf541dc46b15496506bc6f580c9a93f08a5bcba57366fcace23498661ac9fb1ab3">M2M_WIFI_REQ_SET_STOP_SCAN_OPTION</a>, (<a class="code hl_typedef" href="group___data_t.html#ga4df709a77647e870bbf1d955b8edc9a6">uint8</a> *)&amp;StopScanOption, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtstr_m2_m_stop_scan_option.html">tstrM2MStopScanOption</a>), <a class="code hl_define" href="group___b_s_p_define.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0);</div>
<div class="line"><span class="lineno"> 1241</span> </div>
<div class="line"><span class="lineno"> 1242</span>        <a class="code hl_define" href="group___debug_defines.html#ga84108eca2655e811179386a39c62acf2">M2M_INFO</a>(<span class="stringliteral">&quot;Scan will %s stop on first result.\n&quot;</span>, StopScanOption.u8StopOnFirstResult ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;NOT&quot;</span>);</div>
<div class="line"><span class="lineno"> 1243</span>    }</div>
<div class="line"><span class="lineno"> 1244</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 1245</span>    {</div>
<div class="line"><span class="lineno"> 1246</span>        s8Ret = <a class="code hl_define" href="group___c_o_m_m_o_n_d_e_f.html#gad7b33b775a3158ec2b1ceeb105b1a461">M2M_ERR_INVALID_ARG</a>;</div>
<div class="line"><span class="lineno"> 1247</span>    }</div>
<div class="line"><span class="lineno"> 1248</span> </div>
<div class="line"><span class="lineno"> 1249</span>    <span class="keywordflow">return</span> s8Ret;</div>
<div class="line"><span class="lineno"> 1250</span>}</div>
<div class="ttc" id="agroup___debug_defines_html_ga84108eca2655e811179386a39c62acf2"><div class="ttname"><a href="group___debug_defines.html#ga84108eca2655e811179386a39c62acf2">M2M_INFO</a></div><div class="ttdeci">#define M2M_INFO(...)</div><div class="ttdef"><b>Definition:</b> <a href="nm__debug_8h_source.html#l00061">nm_debug.h:61</a></div></div>
<div class="ttc" id="agroup___wlan_enums_html_ggaf541dc46b15496506bc6f580c9a93f08a5bcba57366fcace23498661ac9fb1ab3"><div class="ttname"><a href="group___wlan_enums.html#ggaf541dc46b15496506bc6f580c9a93f08a5bcba57366fcace23498661ac9fb1ab3">M2M_WIFI_REQ_SET_STOP_SCAN_OPTION</a></div><div class="ttdeci">@ M2M_WIFI_REQ_SET_STOP_SCAN_OPTION</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01119">m2m_types.h:1116</a></div></div>
<div class="ttc" id="astructtstr_m2_m_stop_scan_option_html"><div class="ttname"><a href="structtstr_m2_m_stop_scan_option.html">tstrM2MStopScanOption</a></div><div class="ttdoc">This struct holds additional configuration options for Wi-Fi scan.</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01842">m2m_types.h:1842</a></div></div>
<div class="ttc" id="astructtstr_m2_m_stop_scan_option_html_abb8738f8c93bb4793d93a283b04bb7c6"><div class="ttname"><a href="structtstr_m2_m_stop_scan_option.html#abb8738f8c93bb4793d93a283b04bb7c6">tstrM2MStopScanOption::u8StopOnFirstResult</a></div><div class="ttdeci">uint8 u8StopOnFirstResult</div><div class="ttdef"><b>Definition:</b> <a href="m2m__types_8h_source.html#l01843">m2m_types.h:1843</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="m2m__hif_8c_source.html#l00293">hif_send()</a>, <a class="el" href="nm__common_8h_source.html#l00066">M2M_ERR_FAIL</a>, <a class="el" href="nm__common_8h_source.html#l00070">M2M_ERR_INVALID_ARG</a>, <a class="el" href="nm__debug_8h_source.html#l00061">M2M_INFO</a>, <a class="el" href="m2m__types_8h_source.html#l00815">M2M_REQ_GROUP_WIFI</a>, <a class="el" href="m2m__types_8h_source.html#l01116">M2M_WIFI_REQ_SET_STOP_SCAN_OPTION</a>, <a class="el" href="nm__bsp_8h_source.html#l00064">NULL</a>, and <a class="el" href="m2m__types_8h_source.html#l01843">tstrM2MStopScanOption::u8StopOnFirstResult</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___w_l_a_n_s_c_a_n_ga2b92950b50cbafac657879d0513c35a6_cgraph.gif" border="0" usemap="#agroup___w_l_a_n_s_c_a_n_ga2b92950b50cbafac657879d0513c35a6_cgraph" alt=""/></div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Mar 11 2023 23:19:38 for WINC1500 Weather Client Demo for SAME70 Xplained by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
