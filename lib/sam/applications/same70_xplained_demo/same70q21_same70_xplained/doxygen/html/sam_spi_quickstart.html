<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WINC1500 Weather Client Demo for SAME70 Xplained: Quickstart guide for SAM SPI driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WINC1500 Weather Client Demo for SAME70 Xplained
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Quickstart guide for SAM SPI driver </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is the quickstart guide for the <a class="el" href="group__spi__group.html">SAM SPI driver</a>, with step-by-step instructions on how to configure and use the driver in a selection of use cases.</p>
<p>The use cases contain several code fragments. The code fragments in the steps for setup can be copied into a custom initialization function, while the steps for usage can be copied into, e.g.the main application function.</p>
<h1><a class="anchor" id="spi_basic_use_case"></a>
Basic use case</h1>
<p>In this basic use case, the SPI module are configured for:</p><ul>
<li>Master mode</li>
<li>Interrupt-based handling</li>
</ul>
<h2><a class="anchor" id="sam_spi_quickstart_prereq"></a>
Prerequisites</h2>
<ol type="1">
<li><a class="el" href="group__sysclk__group.html">System Clock Management (Sysclock)</a></li>
</ol>
<h1><a class="anchor" id="spi_basic_use_case_setup"></a>
Setup steps</h1>
<h2><a class="anchor" id="spi_basic_use_case_setup_code"></a>
Example code</h2>
<p>Add to application C-file: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="spi__master_8c.html#a76840935a2635f2b78d870016f89285c">spi_master_init</a>(<a class="code hl_struct" href="struct_spi.html">Spi</a> *p_spi)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#ga717643bb5d2401bed319b2ad8bc41462">spi_enable_clock</a>(p_spi);</div>
<div class="line">    <a class="code hl_function" href="drivers_2spi_2spi_8h.html#a678f8e496cc236c912f4105aebffef36">spi_reset</a>(p_spi);</div>
<div class="line">    <a class="code hl_function" href="drivers_2spi_2spi_8h.html#a837805f2bd2b5f2c0a29e9651e503d34">spi_set_master_mode</a>(p_spi);</div>
<div class="line">    <a class="code hl_function" href="drivers_2spi_2spi_8h.html#a1498285b5ff73664ad14833e5ce01c6a">spi_disable_mode_fault_detect</a>(p_spi);</div>
<div class="line">    <a class="code hl_function" href="drivers_2spi_2spi_8h.html#ae7b7d093c56b79c19a934cfe24a9d5f4">spi_disable_loopback</a>(p_spi);</div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#ga71131f0a9772ac93eeb6af52a1101ecc">spi_set_peripheral_chip_select_value</a>(p_spi,</div>
<div class="line">                                         <a class="code hl_define" href="drivers_2spi_2spi_8h.html#abfe59fb0c0885124925c8dcd1de51afe">spi_get_pcs</a>(<a class="code hl_define" href="spi__master_8c.html#a67bd50797ad62cf691233e0623cd1196">DEFAULT_CHIP_ID</a>));</div>
<div class="line">    <a class="code hl_function" href="drivers_2spi_2spi_8h.html#a2b847a88e333914fc3495d174c462f24">spi_set_fixed_peripheral_select</a>(p_spi);</div>
<div class="line">    <a class="code hl_function" href="drivers_2spi_2spi_8h.html#a78a81dd4ff97409c9a09c5d316d29150">spi_disable_peripheral_select_decode</a>(p_spi);</div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#gab1a11f2d8808eb355c9b1e43be00da96">spi_set_delay_between_chip_select</a>(p_spi, <a class="code hl_define" href="conf__spi__master_8h.html#a2e703725551c981e6c53c149d179b5ea">CONFIG_SPI_MASTER_DELAY_BCS</a>);</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="spi__master_8c.html#a7d0c751be047b1e164683bce6887819d">spi_master_setup_device</a>(<a class="code hl_struct" href="struct_spi.html">Spi</a> *p_spi, <span class="keyword">struct</span> <a class="code hl_struct" href="structspi__device.html">spi_device</a> *device,</div>
<div class="line">    <a class="code hl_typedef" href="sam__spi_2spi__master_8h.html#a781db101a4c4490735eb12d3cb92fde7">spi_flags_t</a> flags, uint32_t baud_rate, <a class="code hl_typedef" href="sam__spi_2spi__master_8h.html#a4a28574ec2d052b3fcffd1d7c423a52a">board_spi_select_id_t</a> sel_id)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#ga4ccc2d131b456b98318bdb310e755447">spi_set_transfer_delay</a>(p_spi, device-&gt;<a class="code hl_variable" href="structspi__device.html#a3bf4dff6c088541b056ff3a082fe2f68">id</a>, <a class="code hl_define" href="conf__spi__master_8h.html#acf9c81ee4bbe25a4f7ce9323950df30a">CONFIG_SPI_MASTER_DELAY_BS</a>,</div>
<div class="line">                           <a class="code hl_define" href="conf__spi__master_8h.html#a9191538dc45075e8db54b0ce71854830">CONFIG_SPI_MASTER_DELAY_BCT</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#ga357d0caf683beeb0a84b4e0874dbbb2c">spi_set_bits_per_transfer</a>(p_spi, device-&gt;<a class="code hl_variable" href="structspi__device.html#a3bf4dff6c088541b056ff3a082fe2f68">id</a>, <a class="code hl_define" href="conf__spi__master_8h.html#ae8f69c3f97cc5f256da40ea4009ed004">CONFIG_SPI_MASTER_BITS_PER_TRANSFER</a>);</div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#ga28248e1b6c31317a2d0128e5eae6f516">spi_set_baudrate_div</a>(p_spi, device-&gt;<a class="code hl_variable" href="structspi__device.html#a3bf4dff6c088541b056ff3a082fe2f68">id</a>,</div>
<div class="line">                         <a class="code hl_function" href="group__sam__drivers__spi__group.html#ga151e4d2f434b53791d394b8eb73dfb21">spi_calc_baudrate_div</a>(baud_rate, <a class="code hl_function" href="group__sysclk__group.html#ga8ae5a954767dfc4d16ce5ae7928e6edf">sysclk_get_peripheral_hz</a>()));</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#ga64027e21fa9b3d741d24abaf3cb2ecc4">spi_configure_cs_behavior</a>(p_spi, device-&gt;<a class="code hl_variable" href="structspi__device.html#a3bf4dff6c088541b056ff3a082fe2f68">id</a>, <a class="code hl_enumvalue" href="drivers_2spi_2spi_8h.html#a06f525f2ec5fb3789b37b022fc39c5a0a1bad3eb27a2089ae49ae4d23dfd22317">SPI_CS_KEEP_LOW</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#ga5047dc4debab95407fa5b27360addc39">spi_set_clock_polarity</a>(p_spi, device-&gt;<a class="code hl_variable" href="structspi__device.html#a3bf4dff6c088541b056ff3a082fe2f68">id</a>, flags &gt;&gt; 1);</div>
<div class="line">    <a class="code hl_function" href="group__sam__drivers__spi__group.html#gae7f5adbf3062c0a834cfd8f98b0c1878">spi_set_clock_phase</a>(p_spi, device-&gt;<a class="code hl_variable" href="structspi__device.html#a3bf4dff6c088541b056ff3a082fe2f68">id</a>, ((flags &amp; 0x1) ^ 0x1));</div>
<div class="line">}</div>
<div class="ttc" id="aconf__spi__master_8h_html_a2e703725551c981e6c53c149d179b5ea"><div class="ttname"><a href="conf__spi__master_8h.html#a2e703725551c981e6c53c149d179b5ea">CONFIG_SPI_MASTER_DELAY_BCS</a></div><div class="ttdeci">#define CONFIG_SPI_MASTER_DELAY_BCS</div><div class="ttdoc">Default Config Spi Master Delay BCS.</div><div class="ttdef"><b>Definition:</b> <a href="conf__spi__master_8h_source.html#l00043">conf_spi_master.h:43</a></div></div>
<div class="ttc" id="aconf__spi__master_8h_html_a9191538dc45075e8db54b0ce71854830"><div class="ttname"><a href="conf__spi__master_8h.html#a9191538dc45075e8db54b0ce71854830">CONFIG_SPI_MASTER_DELAY_BCT</a></div><div class="ttdeci">#define CONFIG_SPI_MASTER_DELAY_BCT</div><div class="ttdoc">Default Config Spi Master Delay BCT.</div><div class="ttdef"><b>Definition:</b> <a href="conf__spi__master_8h_source.html#l00049">conf_spi_master.h:49</a></div></div>
<div class="ttc" id="aconf__spi__master_8h_html_acf9c81ee4bbe25a4f7ce9323950df30a"><div class="ttname"><a href="conf__spi__master_8h.html#acf9c81ee4bbe25a4f7ce9323950df30a">CONFIG_SPI_MASTER_DELAY_BS</a></div><div class="ttdeci">#define CONFIG_SPI_MASTER_DELAY_BS</div><div class="ttdoc">Default Config Spi Master Delay BS.</div><div class="ttdef"><b>Definition:</b> <a href="conf__spi__master_8h_source.html#l00052">conf_spi_master.h:52</a></div></div>
<div class="ttc" id="aconf__spi__master_8h_html_ae8f69c3f97cc5f256da40ea4009ed004"><div class="ttname"><a href="conf__spi__master_8h.html#ae8f69c3f97cc5f256da40ea4009ed004">CONFIG_SPI_MASTER_BITS_PER_TRANSFER</a></div><div class="ttdeci">#define CONFIG_SPI_MASTER_BITS_PER_TRANSFER</div><div class="ttdoc">Default Config Spi Master Bits per Transfer Definition.</div><div class="ttdef"><b>Definition:</b> <a href="conf__spi__master_8h_source.html#l00046">conf_spi_master.h:46</a></div></div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_a06f525f2ec5fb3789b37b022fc39c5a0a1bad3eb27a2089ae49ae4d23dfd22317"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#a06f525f2ec5fb3789b37b022fc39c5a0a1bad3eb27a2089ae49ae4d23dfd22317">SPI_CS_KEEP_LOW</a></div><div class="ttdeci">@ SPI_CS_KEEP_LOW</div><div class="ttdoc">CS does not rise until a new transfer is requested on different chip select.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00068">drivers/spi/spi.h:68</a></div></div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_a1498285b5ff73664ad14833e5ce01c6a"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#a1498285b5ff73664ad14833e5ce01c6a">spi_disable_mode_fault_detect</a></div><div class="ttdeci">static void spi_disable_mode_fault_detect(Spi *p_spi)</div><div class="ttdoc">Disable Mode Fault Detection.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00252">drivers/spi/spi.h:252</a></div></div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_a2b847a88e333914fc3495d174c462f24"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#a2b847a88e333914fc3495d174c462f24">spi_set_fixed_peripheral_select</a></div><div class="ttdeci">static void spi_set_fixed_peripheral_select(Spi *p_spi)</div><div class="ttdoc">Set Fixed Peripheral Select.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00180">drivers/spi/spi.h:180</a></div></div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_a678f8e496cc236c912f4105aebffef36"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#a678f8e496cc236c912f4105aebffef36">spi_reset</a></div><div class="ttdeci">static void spi_reset(Spi *p_spi)</div><div class="ttdoc">Reset SPI and set it to Slave mode.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00088">drivers/spi/spi.h:88</a></div></div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_a78a81dd4ff97409c9a09c5d316d29150"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#a78a81dd4ff97409c9a09c5d316d29150">spi_disable_peripheral_select_decode</a></div><div class="ttdeci">static void spi_disable_peripheral_select_decode(Spi *p_spi)</div><div class="ttdoc">Disable Peripheral Select Decode.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00216">drivers/spi/spi.h:216</a></div></div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_a837805f2bd2b5f2c0a29e9651e503d34"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#a837805f2bd2b5f2c0a29e9651e503d34">spi_set_master_mode</a></div><div class="ttdeci">static void spi_set_master_mode(Spi *p_spi)</div><div class="ttdoc">Set SPI to Master mode.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00132">drivers/spi/spi.h:132</a></div></div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_abfe59fb0c0885124925c8dcd1de51afe"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#abfe59fb0c0885124925c8dcd1de51afe">spi_get_pcs</a></div><div class="ttdeci">#define spi_get_pcs(chip_sel_id)</div><div class="ttdoc">Generate Peripheral Chip Select Value from Chip Select ID.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00081">drivers/spi/spi.h:81</a></div></div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_ae7b7d093c56b79c19a934cfe24a9d5f4"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#ae7b7d093c56b79c19a934cfe24a9d5f4">spi_disable_loopback</a></div><div class="ttdeci">static void spi_disable_loopback(Spi *p_spi)</div><div class="ttdoc">Disable loopback mode.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00324">drivers/spi/spi.h:324</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_ga151e4d2f434b53791d394b8eb73dfb21"><div class="ttname"><a href="group__sam__drivers__spi__group.html#ga151e4d2f434b53791d394b8eb73dfb21">spi_calc_baudrate_div</a></div><div class="ttdeci">int16_t spi_calc_baudrate_div(const uint32_t baudrate, uint32_t mck)</div><div class="ttdoc">Calculate the baudrate divider.</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00362">spi.c:362</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_ga28248e1b6c31317a2d0128e5eae6f516"><div class="ttname"><a href="group__sam__drivers__spi__group.html#ga28248e1b6c31317a2d0128e5eae6f516">spi_set_baudrate_div</a></div><div class="ttdeci">int16_t spi_set_baudrate_div(Spi *p_spi, uint32_t ul_pcs_ch, uint8_t uc_baudrate_divider)</div><div class="ttdoc">Set Serial Clock Baud Rate divider value (SCBR).</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00385">spi.c:385</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_ga357d0caf683beeb0a84b4e0874dbbb2c"><div class="ttname"><a href="group__sam__drivers__spi__group.html#ga357d0caf683beeb0a84b4e0874dbbb2c">spi_set_bits_per_transfer</a></div><div class="ttdeci">void spi_set_bits_per_transfer(Spi *p_spi, uint32_t ul_pcs_ch, uint32_t ul_bits)</div><div class="ttdoc">Set number of bits per transfer.</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00345">spi.c:345</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_ga4ccc2d131b456b98318bdb310e755447"><div class="ttname"><a href="group__sam__drivers__spi__group.html#ga4ccc2d131b456b98318bdb310e755447">spi_set_transfer_delay</a></div><div class="ttdeci">void spi_set_transfer_delay(Spi *p_spi, uint32_t ul_pcs_ch, uint8_t uc_dlybs, uint8_t uc_dlybct)</div><div class="ttdoc">Configure timing for SPI transfer.</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00405">spi.c:405</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_ga5047dc4debab95407fa5b27360addc39"><div class="ttname"><a href="group__sam__drivers__spi__group.html#ga5047dc4debab95407fa5b27360addc39">spi_set_clock_polarity</a></div><div class="ttdeci">void spi_set_clock_polarity(Spi *p_spi, uint32_t ul_pcs_ch, uint32_t ul_polarity)</div><div class="ttdoc">Set clock default state.</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00290">spi.c:290</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_ga64027e21fa9b3d741d24abaf3cb2ecc4"><div class="ttname"><a href="group__sam__drivers__spi__group.html#ga64027e21fa9b3d741d24abaf3cb2ecc4">spi_configure_cs_behavior</a></div><div class="ttdeci">void spi_configure_cs_behavior(Spi *p_spi, uint32_t ul_pcs_ch, uint32_t ul_cs_behavior)</div><div class="ttdoc">Configure CS behavior for SPI transfer (spi_cs_behavior_t).</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00323">spi.c:323</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_ga71131f0a9772ac93eeb6af52a1101ecc"><div class="ttname"><a href="group__sam__drivers__spi__group.html#ga71131f0a9772ac93eeb6af52a1101ecc">spi_set_peripheral_chip_select_value</a></div><div class="ttdeci">void spi_set_peripheral_chip_select_value(Spi *p_spi, uint32_t ul_value)</div><div class="ttdoc">Set Peripheral Chip Select (PCS) value.</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00193">spi.c:193</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_ga717643bb5d2401bed319b2ad8bc41462"><div class="ttname"><a href="group__sam__drivers__spi__group.html#ga717643bb5d2401bed319b2ad8bc41462">spi_enable_clock</a></div><div class="ttdeci">void spi_enable_clock(Spi *p_spi)</div><div class="ttdoc">Enable SPI clock.</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00060">spi.c:60</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_gab1a11f2d8808eb355c9b1e43be00da96"><div class="ttname"><a href="group__sam__drivers__spi__group.html#gab1a11f2d8808eb355c9b1e43be00da96">spi_set_delay_between_chip_select</a></div><div class="ttdeci">void spi_set_delay_between_chip_select(Spi *p_spi, uint32_t ul_delay)</div><div class="ttdoc">Set delay between chip selects (in number of MCK clocks).</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00206">spi.c:206</a></div></div>
<div class="ttc" id="agroup__sam__drivers__spi__group_html_gae7f5adbf3062c0a834cfd8f98b0c1878"><div class="ttname"><a href="group__sam__drivers__spi__group.html#gae7f5adbf3062c0a834cfd8f98b0c1878">spi_set_clock_phase</a></div><div class="ttdeci">void spi_set_clock_phase(Spi *p_spi, uint32_t ul_pcs_ch, uint32_t ul_phase)</div><div class="ttdoc">Set Data Capture Phase.</div><div class="ttdef"><b>Definition:</b> <a href="spi_8c_source.html#l00307">spi.c:307</a></div></div>
<div class="ttc" id="agroup__sysclk__group_html_ga8ae5a954767dfc4d16ce5ae7928e6edf"><div class="ttname"><a href="group__sysclk__group.html#ga8ae5a954767dfc4d16ce5ae7928e6edf">sysclk_get_peripheral_hz</a></div><div class="ttdeci">static uint32_t sysclk_get_peripheral_hz(void)</div><div class="ttdoc">Retrieves the current rate in Hz of the peripheral clocks.</div><div class="ttdef"><b>Definition:</b> <a href="same70_2sysclk_8h_source.html#l00392">same70/sysclk.h:392</a></div></div>
<div class="ttc" id="asam__spi_2spi__master_8h_html_a4a28574ec2d052b3fcffd1d7c423a52a"><div class="ttname"><a href="sam__spi_2spi__master_8h.html#a4a28574ec2d052b3fcffd1d7c423a52a">board_spi_select_id_t</a></div><div class="ttdeci">uint32_t board_spi_select_id_t</div><div class="ttdoc">Board SPI Select Id Definition.</div><div class="ttdef"><b>Definition:</b> <a href="sam__spi_2spi__master_8h_source.html#l00116">sam_spi/spi_master.h:116</a></div></div>
<div class="ttc" id="asam__spi_2spi__master_8h_html_a781db101a4c4490735eb12d3cb92fde7"><div class="ttname"><a href="sam__spi_2spi__master_8h.html#a781db101a4c4490735eb12d3cb92fde7">spi_flags_t</a></div><div class="ttdeci">uint8_t spi_flags_t</div><div class="ttdoc">SPI Flags Definition.</div><div class="ttdef"><b>Definition:</b> <a href="sam__spi_2spi__master_8h_source.html#l00113">sam_spi/spi_master.h:113</a></div></div>
<div class="ttc" id="aspi__master_8c_html_a67bd50797ad62cf691233e0623cd1196"><div class="ttname"><a href="spi__master_8c.html#a67bd50797ad62cf691233e0623cd1196">DEFAULT_CHIP_ID</a></div><div class="ttdeci">#define DEFAULT_CHIP_ID</div><div class="ttdoc">The default chip select id.</div><div class="ttdef"><b>Definition:</b> <a href="spi__master_8c_source.html#l00061">spi_master.c:61</a></div></div>
<div class="ttc" id="aspi__master_8c_html_a76840935a2635f2b78d870016f89285c"><div class="ttname"><a href="spi__master_8c.html#a76840935a2635f2b78d870016f89285c">spi_master_init</a></div><div class="ttdeci">void spi_master_init(Spi *p_spi)</div><div class="ttdoc">Initialize the SPI in master mode.</div><div class="ttdef"><b>Definition:</b> <a href="spi__master_8c_source.html#l00068">spi_master.c:68</a></div></div>
<div class="ttc" id="aspi__master_8c_html_a7d0c751be047b1e164683bce6887819d"><div class="ttname"><a href="spi__master_8c.html#a7d0c751be047b1e164683bce6887819d">spi_master_setup_device</a></div><div class="ttdeci">void spi_master_setup_device(Spi *p_spi, struct spi_device *device, spi_flags_t flags, uint32_t baud_rate, board_spi_select_id_t sel_id)</div><div class="ttdoc">Set up an SPI device.</div><div class="ttdef"><b>Definition:</b> <a href="spi__master_8c_source.html#l00100">spi_master.c:100</a></div></div>
<div class="ttc" id="astruct_spi_html"><div class="ttname"><a href="struct_spi.html">Spi</a></div><div class="ttdoc">Spi hardware registers.</div><div class="ttdef"><b>Definition:</b> <a href="utils_2cmsis_2same70_2include_2component_2spi_8h_source.html#l00046">utils/cmsis/same70/include/component/spi.h:46</a></div></div>
<div class="ttc" id="astructspi__device_html"><div class="ttname"><a href="structspi__device.html">spi_device</a></div><div class="ttdoc">Polled SPI device definition.</div><div class="ttdef"><b>Definition:</b> <a href="sam__spi_2spi__master_8h_source.html#l00120">sam_spi/spi_master.h:120</a></div></div>
<div class="ttc" id="astructspi__device_html_a3bf4dff6c088541b056ff3a082fe2f68"><div class="ttname"><a href="structspi__device.html#a3bf4dff6c088541b056ff3a082fe2f68">spi_device::id</a></div><div class="ttdeci">board_spi_select_id_t id</div><div class="ttdoc">Board specific select id.</div><div class="ttdef"><b>Definition:</b> <a href="sam__spi_2spi__master_8h_source.html#l00122">sam_spi/spi_master.h:122</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="spi_basic_use_case_setup_flow"></a>
Workflow</h2>
<ol type="1">
<li>Initialize the SPI in master mode:<ul>
<li><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="spi__master_8c.html#a76840935a2635f2b78d870016f89285c">spi_master_init</a>(SPI_EXAMPLE);</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Set up an SPI device:<ul>
<li><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="spi__master_8c.html#a7d0c751be047b1e164683bce6887819d">spi_master_setup_device</a>(SPI_EXAMPLE, &amp;SPI_DEVICE_EXAMPLE,</div>
<div class="line">           <a class="code hl_define" href="sam__spi_2spi__master_8h.html#a1ec07ad94d5f6276c1c0b41d0550fe52">SPI_MODE_0</a>, SPI_EXAMPLE_BAUDRATE, 0); </div>
<div class="ttc" id="asam__spi_2spi__master_8h_html_a1ec07ad94d5f6276c1c0b41d0550fe52"><div class="ttname"><a href="sam__spi_2spi__master_8h.html#a1ec07ad94d5f6276c1c0b41d0550fe52">SPI_MODE_0</a></div><div class="ttdeci">#define SPI_MODE_0</div><div class="ttdoc">SPI mode 0.</div><div class="ttdef"><b>Definition:</b> <a href="sam__spi_2spi__master_8h_source.html#l00096">sam_spi/spi_master.h:96</a></div></div>
</div><!-- fragment --></li>
<li><dl class="section note"><dt>Note</dt><dd>The returned device descriptor structure must be passed to the driver whenever that device should be used as current slave device.</dd></dl>
</li>
</ul>
</li>
<li>Enable SPI module:<ul>
<li><div class="fragment"><div class="line"><a class="code hl_function" href="drivers_2spi_2spi_8h.html#a0d4feda4666a1448e5d41a8479b60689">spi_enable</a>(SPI_EXAMPLE); </div>
<div class="ttc" id="adrivers_2spi_2spi_8h_html_a0d4feda4666a1448e5d41a8479b60689"><div class="ttname"><a href="drivers_2spi_2spi_8h.html#a0d4feda4666a1448e5d41a8479b60689">spi_enable</a></div><div class="ttdeci">static void spi_enable(Spi *p_spi)</div><div class="ttdoc">Enable SPI.</div><div class="ttdef"><b>Definition:</b> <a href="drivers_2spi_2spi_8h_source.html#l00098">drivers/spi/spi.h:98</a></div></div>
</div><!-- fragment --> </li>
</ul>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Mar 11 2023 23:19:38 for WINC1500 Weather Client Demo for SAME70 Xplained by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
